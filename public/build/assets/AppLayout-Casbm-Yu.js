import{j as $,m as z,h as b,i as D,g,o as d,c,F as S,r as _,n as h,d as e,t as Y,u as a,J as B,K as q,C as w,e as H,b as Q,f as W,a as J,H as P}from"./app-DpdZrQdg.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L=b(typeof navigator<"u"?navigator.onLine:!0),F=b(L.value?new Date:null);let y=0;function V(){L.value=!0,F.value=new Date}function E(){L.value=!1}function N(){return $(()=>{y===0&&(window.addEventListener("online",V),window.addEventListener("offline",E)),y++}),z(()=>{y--,y===0&&(window.removeEventListener("online",V),window.removeEventListener("offline",E))}),{isOnline:L,lastOnlineAt:F}}const R="rreader-offline-queue",k=b(K());let A=!1;function K(){try{const l=localStorage.getItem(R);return l?JSON.parse(l):[]}catch{return[]}}function I(){try{localStorage.setItem(R,JSON.stringify(k.value))}catch{}}function G(l,r,n={}){k.value.push({method:l,url:r,data:n,queuedAt:new Date().toISOString()}),I()}function C(){if(A||k.value.length===0)return;A=!0;const l=[...k.value];k.value=[],I();let r=Promise.resolve();for(const n of l)r=r.then(()=>new Promise(p=>{g[n.method](n.url,n.data,{preserveScroll:!0,preserveState:!0,onFinish:()=>p(),onError:()=>p()})}));r.finally(()=>{A=!1,k.value.length>0&&C()})}function U(){const{isOnline:l}=N();return D(l,r=>{r&&C()}),l.value&&k.value.length>0&&setTimeout(C,100),{queue:k,enqueue:G,flushQueue:C}}const x=b([]);let X=0;function Z(){function l(s,i="info",v=3e3){const f=X++;return x.value.push({id:f,message:s,type:i,leaving:!1}),v>0&&setTimeout(()=>r(f),v),f}function r(s){const i=x.value.find(v=>v.id===s);i&&(i.leaving=!0,setTimeout(()=>{x.value=x.value.filter(v=>v.id!==s)},300))}function n(s,i=3e3){return l(s,"success",i)}function p(s,i=4e3){return l(s,"error",i)}function o(s,i=3e3){return l(s,"info",i)}return{toasts:x,show:l,dismiss:r,success:n,error:p,info:o}}const ee={class:"fixed bottom-20 lg:bottom-6 inset-x-0 z-50 flex flex-col items-center gap-2 pointer-events-none px-4"},te={key:0,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},re={key:1,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},ne={key:2,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},se=["onClick"],le={__name:"ToastContainer",setup(l){const{toasts:r,dismiss:n}=Z();return(p,o)=>(d(),c("div",ee,[(d(!0),c(S,null,_(a(r),s=>(d(),c("div",{key:s.id,class:h(["pointer-events-auto flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium shadow-lg transition-all duration-300",[s.type==="success"?"bg-green-600 text-white":s.type==="error"?"bg-red-600 text-white":"bg-neutral-300 dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100",s.leaving?"opacity-0 translate-y-2":"opacity-100 translate-y-0"]]),role:"status","aria-live":"polite"},[s.type==="success"?(d(),c("svg",te,[...o[0]||(o[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1)])])):s.type==="error"?(d(),c("svg",re,[...o[1]||(o[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"},null,-1)])])):(d(),c("svg",ne,[...o[2]||(o[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},null,-1)])])),e("span",null,Y(s.message),1),e("button",{onClick:i=>a(n)(s.id),class:"ml-1 shrink-0 rounded p-0.5 opacity-70 hover:opacity-100 transition-opacity","aria-label":"Dismiss"},[...o[3]||(o[3]=[e("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,se)],2))),128))]))}},ae={},oe={class:"lg:hidden"},ie={class:"hidden lg:block"};function ue(l,r){return d(),c(S,null,[e("div",oe,[r[1]||(r[1]=e("div",{class:"border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2"},[e("div",{class:"h-3 w-16 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"})],-1)),(d(),c(S,null,_(6,n=>e("div",{key:n,class:"flex gap-3 border-b border-neutral-200/50 dark:border-neutral-800/50 px-4 py-3"},[r[0]||(r[0]=B('<div class="min-w-0 flex-1"><div class="flex items-center gap-2"><div class="h-3.5 w-3.5 animate-pulse rounded-sm bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3 w-20 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3 w-8 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div></div><div class="mt-2 h-4 w-full animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="mt-1.5 h-4 w-3/4 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="mt-1.5 h-3 w-full animate-pulse rounded bg-neutral-200/60 dark:bg-neutral-800/60"></div></div>',1)),e("div",{class:h(["h-16 w-16 shrink-0 animate-pulse rounded-lg bg-neutral-200 dark:bg-neutral-800",{hidden:n%3===0}])},null,2)])),64))]),e("div",ie,[r[3]||(r[3]=e("div",{class:"border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2"},[e("div",{class:"h-3 w-16 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"})],-1)),(d(),c(S,null,_(10,n=>e("div",{key:"d"+n,class:"flex items-center gap-3 border-b border-neutral-200/50 dark:border-neutral-800/50 px-4 py-2.5"},[...r[2]||(r[2]=[B('<div class="h-4 w-4 shrink-0 animate-pulse rounded-sm bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3 w-28 shrink-0 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3.5 flex-1 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="hidden xl:block h-3 w-48 shrink-0 animate-pulse rounded bg-neutral-200/60 dark:bg-neutral-800/60"></div><div class="h-3 w-10 shrink-0 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div>',5)])])),64))])],64)}const de=T(ae,[["render",ue]]),ce={class:"min-h-screen bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100"},ve={class:"sticky top-0 z-40 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 pt-safe"},pe={class:"flex h-14 items-center justify-between px-4"},fe={class:"flex items-center gap-3"},ke={class:"text-lg font-semibold text-neutral-900 dark:text-neutral-100"},ge={class:"flex items-center gap-2"},he={key:0,class:"sticky top-14 z-30 flex items-center justify-center gap-2 bg-amber-600 px-4 py-1.5 text-xs font-medium text-white"},be={class:"pb-16 lg:pb-0"},xe={key:1,class:"page-enter"},me={class:"flex h-14 items-center justify-around px-2"},M=10,we={__name:"AppLayout",setup(l){const{isOnline:r}=N();U();const n=P(),p=q("toggleSidebar",null),o=b(!1);let s=null,i=null;$(()=>{s=g.on("start",()=>{o.value=!0}),i=g.on("finish",()=>{o.value=!1})}),z(()=>{s?.(),i?.()});function v(u){g.get(route("articles.index",u),{},{preserveState:!1})}const f=b(!1);let j=0;function O(){const u=window.scrollY;u<M?f.value=!1:u>j+M?f.value=!0:u<j-M&&(f.value=!1),j=u}return $(()=>{window.addEventListener("scroll",O,{passive:!0})}),z(()=>{window.removeEventListener("scroll",O)}),(u,t)=>(d(),c("div",ce,[e("header",ve,[e("div",pe,[e("div",fe,[w(u.$slots,"header-left",{},void 0,!0),e("h1",ke,[w(u.$slots,"title",{},()=>[t[5]||(t[5]=H("RReader",-1))],!0)])]),e("div",ge,[w(u.$slots,"header-right",{},void 0,!0)])])]),a(r)?Q("",!0):(d(),c("div",he,[...t[6]||(t[6]=[e("svg",{class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})],-1),H(" You're offline â€” viewing cached content ",-1)])])),e("main",be,[o.value?(d(),W(de,{key:0})):(d(),c("div",xe,[w(u.$slots,"default",{},void 0,!0)]))]),J(le),e("nav",{class:h(["fixed bottom-0 inset-x-0 z-40 border-t border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 lg:hidden pb-safe transition-transform duration-300",f.value?"translate-y-full":"translate-y-0"]),"aria-label":"Bottom navigation"},[e("div",me,[e("button",{onClick:t[0]||(t[0]=m=>a(p)?a(p)():a(g).visit(u.route("articles.index"))),class:"flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors",title:"Open sidebar","aria-label":"Open sidebar"},[...t[7]||(t[7]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1),e("span",{class:"text-[10px]"},"Menu",-1)])]),e("button",{onClick:t[1]||(t[1]=m=>v({filter:"read_later"})),class:h(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",a(n).props.activeFilter==="read_later"?"text-amber-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Read Later","aria-label":"Read Later"},[...t[8]||(t[8]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1),e("span",{class:"text-[10px]"},"Read Later",-1)])],2),e("button",{onClick:t[2]||(t[2]=m=>v({})),class:h(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",!a(n).props.activeFilter&&!a(n).props.activeFeedId&&!a(n).props.activeCategoryId&&a(n).url.startsWith("/articles")&&!a(n).url.startsWith("/articles/search")?"text-blue-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"All feeds","aria-label":"All feeds"},[...t[9]||(t[9]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})],-1),e("span",{class:"text-[10px]"},"Feeds",-1)])],2),e("button",{onClick:t[3]||(t[3]=m=>a(g).visit(u.route("feeds.create"))),class:h(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",a(n).url.startsWith("/feeds/create")?"text-blue-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Add feed","aria-label":"Add feed"},[...t[10]||(t[10]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3"})],-1),e("span",{class:"text-[10px]"},"Add",-1)])],2),e("button",{onClick:t[4]||(t[4]=m=>a(g).visit(u.route("articles.search"))),class:h(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",a(n).url.startsWith("/articles/search")?"text-blue-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Search","aria-label":"Search"},[...t[11]||(t[11]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),e("span",{class:"text-[10px]"},"Search",-1)])],2)])],2)]))}},Ce=T(we,[["__scopeId","data-v-5b13c224"]]);export{Ce as A,U as a,Z as b,N as u};
