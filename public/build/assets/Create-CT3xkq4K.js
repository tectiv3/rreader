import{C as w,f as U,w as f,a as r,u as s,q as N,d as t,v as x,n as k,o as i,c as n,b as m,e as b,t as u,z as B,F as A,r as L,G as R,h as _}from"./app-BVMziMt6.js";import{A as z}from"./AppLayout-GSJbHyjH.js";import{a as y,b as g,_ as h}from"./TextInput-XkFezhTQ.js";import{P as C}from"./PrimaryButton-D9N8DjDY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"mx-auto max-w-lg px-4 py-6"},E={class:"rounded-xl bg-neutral-50 dark:bg-neutral-900 p-5"},$={key:0,class:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none"},q={key:0,class:"mt-5 rounded-xl bg-neutral-50 dark:bg-neutral-900 p-5"},D={class:"flex items-start gap-3 mb-4"},P=["src"],T={class:"min-w-0 flex-1"},j={class:"text-base font-medium text-neutral-900 dark:text-neutral-100 truncate"},G={key:0,class:"mt-1 text-sm text-neutral-500 dark:text-neutral-400 line-clamp-2"},O={class:"mt-1 text-xs text-neutral-600 dark:text-neutral-500"},H={class:"mb-4"},I={class:"mb-4"},J={key:0},K=["value"],Q={key:1},W={key:0,class:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none"},se={__name:"Create",props:{categories:{type:Array,default:()=>[]},preview:{type:Object,default:null}},setup(o){const v=o,p=w({url:""}),l=w({feed_url:"",title:"",category_id:"",new_category:""}),c=_(!1),d=_(!1),V=()=>{d.value=!0,p.post(route("feeds.preview"),{preserveScroll:!0,onFinish:()=>{d.value=!1}})},F=()=>{v.preview&&(l.feed_url=v.preview.feed_url,l.title||(l.title=v.preview.title)),l.post(route("feeds.store"))},S=()=>{c.value=!c.value,c.value?l.category_id="":l.new_category=""};return(X,e)=>(i(),U(z,null,{title:f(()=>[...e[5]||(e[5]=[b("Add Feed",-1)])]),default:f(()=>[r(s(N),{title:"Add Feed"}),t("div",M,[t("div",E,[e[8]||(e[8]=t("h2",{class:"text-base font-medium text-neutral-800 dark:text-neutral-200 mb-4"},"Feed URL",-1)),t("form",{onSubmit:x(V,["prevent"])},[t("div",null,[r(y,{id:"url",type:"url",class:"block w-full text-base",modelValue:s(p).url,"onUpdate:modelValue":e[0]||(e[0]=a=>s(p).url=a),placeholder:"https://example.com or feed URL",required:"",autofocus:""},null,8,["modelValue"]),e[6]||(e[6]=t("p",{class:"mt-1.5 text-xs text-neutral-600 dark:text-neutral-500"}," Enter a website URL or direct RSS/Atom feed URL ",-1)),r(g,{class:"mt-2",message:s(p).errors.url},null,8,["message"])]),r(C,{class:k(["mt-4 w-full",{"opacity-25":d.value}]),disabled:d.value},{default:f(()=>[d.value?(i(),n("svg",$,[...e[7]||(e[7]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):m("",!0),b(" "+u(d.value?"Searching...":"Find Feed"),1)]),_:1},8,["class","disabled"])],32)]),o.preview?(i(),n("div",q,[t("div",D,[o.preview.favicon_url?(i(),n("img",{key:0,src:o.preview.favicon_url,class:"mt-0.5 h-6 w-6 rounded",onError:e[1]||(e[1]=a=>a.target.style.display="none")},null,40,P)):m("",!0),t("div",T,[t("h3",j,u(o.preview.title||"Untitled Feed"),1),o.preview.description?(i(),n("p",G,u(o.preview.description),1)):m("",!0),t("p",O,u(o.preview.article_count)+" articles found ",1)])]),t("form",{onSubmit:x(F,["prevent"])},[t("div",H,[r(h,{for:"title",value:"Title (optional)"}),r(y,{id:"title",type:"text",class:"mt-1 block w-full text-base",modelValue:s(l).title,"onUpdate:modelValue":e[2]||(e[2]=a=>s(l).title=a),placeholder:o.preview.title||"Feed title"},null,8,["modelValue","placeholder"])]),t("div",I,[r(h,{for:"category",value:"Category (optional)"}),c.value?(i(),n("div",Q,[r(y,{id:"new_category",type:"text",class:"mt-1 block w-full text-base",modelValue:s(l).new_category,"onUpdate:modelValue":e[4]||(e[4]=a=>s(l).new_category=a),placeholder:"New category name"},null,8,["modelValue"])])):(i(),n("div",J,[B(t("select",{id:"category","onUpdate:modelValue":e[3]||(e[3]=a=>s(l).category_id=a),class:"mt-1 block w-full rounded-lg border-neutral-300 bg-white text-base text-neutral-800 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100"},[e[9]||(e[9]=t("option",{value:""},"No category",-1)),(i(!0),n(A,null,L(o.categories,a=>(i(),n("option",{key:a.id,value:a.id},u(a.name),9,K))),128))],512),[[R,s(l).category_id]])])),t("button",{type:"button",onClick:S,class:"mt-2 text-sm text-blue-400 hover:text-blue-300"},u(c.value?"Choose existing category":"+ Create new category"),1),r(g,{class:"mt-2",message:s(l).errors.category_id},null,8,["message"]),r(g,{class:"mt-2",message:s(l).errors.new_category},null,8,["message"])]),r(g,{class:"mb-3",message:s(l).errors.feed_url},null,8,["message"]),r(C,{class:k(["w-full",{"opacity-25":s(l).processing}]),disabled:s(l).processing},{default:f(()=>[s(l).processing?(i(),n("svg",W,[...e[10]||(e[10]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):m("",!0),b(" "+u(s(l).processing?"Subscribing...":"Subscribe"),1)]),_:1},8,["class","disabled"])],32)])):m("",!0)])]),_:1}))}};export{se as default};
