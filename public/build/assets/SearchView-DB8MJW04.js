import{x as z,b as A,g as a,h as e,m as T,R as V,k as u,t as l,F as v,p as w,a as c,s as D,c as s,j as C}from"./app-CZSjId66.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"sticky top-11 z-20 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-3 backdrop-blur"},L={class:"relative"},N={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2"},R={key:0,class:"flex flex-col items-center justify-center px-4 py-20 text-center"},F={key:1,class:"flex flex-col items-center justify-center px-4 py-20 text-center"},U={class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"},q={key:2},E={class:"lg:hidden"},G=["onClick"],Q={class:"min-w-0 flex-1"},H={class:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-500"},J=["src"],K={class:"truncate"},O={class:"shrink-0"},P={key:0,class:"mt-0.5 line-clamp-2 text-xs text-neutral-600 dark:text-neutral-500"},W=["src","alt"],X={class:"hidden lg:block"},Y=["onClick"],Z=["src"],ee={class:"w-32 shrink-0 truncate text-xs text-neutral-600 dark:text-neutral-500"},te={key:1,class:"hidden xl:block w-64 shrink-0 truncate text-xs text-neutral-500 dark:text-neutral-600"},re={class:"w-12 shrink-0 text-right text-xs text-neutral-500 dark:text-neutral-600"},ae={class:"py-8 text-center text-sm text-neutral-500 dark:text-neutral-600"},se={__name:"SearchView",setup(le){const m=z(),i=c(""),x=c(!1),k=c(null),n=c([]),d=c(!1),b=c(null);function g(o){const r=new Date,t=new Date(o),h=Math.floor((r-t)/1e3);if(h<60)return"just now";const f=Math.floor(h/60);if(f<60)return`${f}m`;const p=Math.floor(f/60);if(p<24)return`${p}h`;const y=Math.floor(p/24);return y<7?`${y}d`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function M(){k.value&&clearTimeout(k.value);const o=i.value.trim();if(!o){n.value=[],d.value=!1;return}x.value=!0,k.value=setTimeout(()=>{S(o)},300)}async function S(o){try{const r=await D.get("/api/articles/search",{params:{q:o}});n.value=r.data.articles||[],d.value=!0}catch{n.value=[],d.value=!0}finally{x.value=!1}}function _(o){m.push({name:"articles.show",params:{id:o.id}})}function j(){i.value="",n.value=[],d.value=!1,b.value?.focus()}function B(){m.back()}return A(()=>{k.value&&clearTimeout(k.value)}),(o,r)=>(s(),a(v,null,[e("header",{class:"sticky top-0 z-30 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 pt-safe"},[e("div",{class:"flex h-11 items-center justify-between px-4"},[e("div",{class:"flex items-center gap-2 min-w-0"},[e("button",{onClick:B,class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors -ml-2","aria-label":"Go back"},[...r[1]||(r[1]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1)])]),r[2]||(r[2]=e("h1",{class:"text-base font-semibold text-neutral-800 dark:text-neutral-200 truncate"}," Search ",-1))])])]),e("div",$,[e("div",L,[r[5]||(r[5]=e("svg",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-400 dark:text-neutral-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1)),T(e("input",{ref_key:"searchInputRef",ref:b,"onUpdate:modelValue":r[0]||(r[0]=t=>i.value=t),onInput:M,type:"search",placeholder:"Search articles...",class:"w-full rounded-lg border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 py-2.5 pl-10 pr-10 text-base text-neutral-800 dark:text-neutral-100 placeholder-neutral-500 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-offset-0",autocomplete:"off"},null,544),[[V,i.value]]),i.value&&!x.value?(s(),a("button",{key:0,onClick:j,class:"absolute right-3 top-1/2 -translate-y-1/2 rounded p-0.5 text-neutral-400 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors","aria-label":"Clear search"},[...r[3]||(r[3]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])):u("",!0),x.value?(s(),a("div",N,[...r[4]||(r[4]=[e("svg",{class:"h-4 w-4 animate-spin text-blue-500",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)])])):u("",!0)])]),!d.value&&!i.value?(s(),a("div",R,[...r[6]||(r[6]=[e("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),e("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," Search your articles ",-1),e("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Find articles by title or content across all your feeds. ",-1)])])):d.value&&n.value.length===0&&!x.value?(s(),a("div",F,[r[7]||(r[7]=e("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1)),r[8]||(r[8]=e("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No results found ",-1)),e("p",U,' No articles match "'+l(i.value)+'". Try different keywords. ',1)])):n.value.length>0?(s(),a("div",q,[e("div",E,[(s(!0),a(v,null,w(n.value,t=>(s(),a("div",{key:t.id,class:"border-b border-neutral-200/50 dark:border-neutral-800/50"},[e("button",{onClick:h=>_(t),class:"flex w-full gap-3 px-4 py-3 text-left transition-colors hover:bg-neutral-50 dark:hover:bg-neutral-900/50 active:bg-neutral-100 dark:active:bg-neutral-800/50"},[e("div",Q,[e("div",H,[t.feed_favicon_url?(s(),a("img",{key:0,src:t.feed_favicon_url,class:"h-3.5 w-3.5 rounded-sm",alt:""},null,8,J)):u("",!0),e("span",K,l(t.feed_title),1),r[9]||(r[9]=e("span",null,"Â·",-1)),e("span",O,l(g(t.published_at)),1)]),e("h3",{class:C(["mt-1 text-sm leading-snug",t.is_read?"text-neutral-600 dark:text-neutral-500 font-normal":"text-neutral-900 dark:text-neutral-100 font-semibold"])},l(t.title),3),t.summary?(s(),a("p",P,l(t.summary),1)):u("",!0)]),t.image_url?(s(),a("img",{key:0,src:t.image_url,class:"h-16 w-16 shrink-0 rounded-lg object-cover",alt:t.title,loading:"lazy"},null,8,W)):u("",!0)],8,G)]))),128))]),e("div",X,[(s(!0),a(v,null,w(n.value,t=>(s(),a("button",{key:t.id,onClick:h=>_(t),class:"flex w-full items-center gap-3 border-b border-neutral-200/50 dark:border-neutral-800/50 px-4 py-2.5 text-left transition-colors hover:bg-neutral-50 dark:hover:bg-neutral-900/50 active:bg-neutral-100 dark:active:bg-neutral-800/50"},[t.feed_favicon_url?(s(),a("img",{key:0,src:t.feed_favicon_url,class:"h-4 w-4 shrink-0 rounded-sm",alt:""},null,8,Z)):u("",!0),e("span",ee,l(t.feed_title),1),e("h3",{class:C(["min-w-0 flex-1 truncate text-sm",t.is_read?"text-neutral-600 dark:text-neutral-500 font-normal":"text-neutral-900 dark:text-neutral-100 font-medium"])},l(t.title),3),t.summary?(s(),a("span",te,l(t.summary),1)):u("",!0),e("span",re,l(g(t.published_at)),1)],8,Y))),128))]),e("div",ae,l(n.value.length)+" result"+l(n.value.length!==1?"s":""),1)])):u("",!0)],64))}},ue=I(se,[["__scopeId","data-v-4bf184c7"]]);export{ue as default};
