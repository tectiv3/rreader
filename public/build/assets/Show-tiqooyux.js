import{u as q,a as D,A as z,b as F}from"./AppLayout-r0cTmJpQ.js";import{h as k,j as P,g as c,c as s,a as C,u as Y,q as G,w as f,d as t,o as i,t as u,F as I,e as m,b as d,n as R,x as T}from"./app-BdAcpLYc.js";import"./useDarkMode-CAs4OnFw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W=["disabled","aria-label"],Q=["fill"],J=["disabled"],K={class:"overflow-x-hidden"},Z={class:"mb-6"},_={class:"text-2xl font-bold leading-tight text-neutral-900 dark:text-neutral-100"},$=["href"],ee={class:"mt-3 flex flex-wrap items-center gap-x-3 gap-y-1 text-sm text-neutral-500 dark:text-neutral-400"},te={class:"flex items-center gap-2"},re=["src"],ae={key:0},le=["innerHTML"],oe={key:0,class:"py-12 text-center"},ne={class:"mt-8 flex items-center justify-between border-t border-neutral-200 dark:border-neutral-800 pt-6"},se={class:"flex items-center gap-3"},ie=["disabled"],ue=["fill"],B=80,V=30,ke={__name:"Show",props:{article:Object,prevArticleId:Number,nextArticleId:Number},setup(a){const r=a,{isOnline:b}=q(),{enqueue:w}=D(),{success:v}=F(),o=k(r.article.is_read_later??!1),h=k(!1),x=k(!1),n=k(null),p=k(!1),j=T(()=>new Date(r.article.published_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),E=T(()=>new Date(r.article.published_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}));function y(){window.history.length>1?window.history.back():c.visit(route("articles.index"))}function L(){if(h.value=!0,!b.value){o.value=!o.value,w("post",route("articles.toggleReadLater",r.article.id),{}),h.value=!1,v(o.value?"Article saved":"Removed from Read Later");return}c.post(route("articles.toggleReadLater",r.article.id),{},{preserveScroll:!0,onSuccess:()=>{o.value=!o.value,v(o.value?"Article saved":"Removed from Read Later")},onFinish:()=>{h.value=!1}})}function X(){if(x.value=!0,!b.value){w("post",route("articles.markAsUnread",r.article.id),{}),x.value=!1,v("Marked as unread");return}c.post(route("articles.markAsUnread",r.article.id),{},{preserveScroll:!0,onFinish:()=>{x.value=!1,v("Marked as unread")}})}function g(){if(r.article.url)try{const l=new URL(r.article.url);(l.protocol==="http:"||l.protocol==="https:")&&window.open(l.href,"_blank","noopener,noreferrer")}catch{}}function N(){navigator.share?navigator.share({title:r.article.title,url:r.article.url}).catch(()=>{}):r.article.url&&navigator.clipboard.writeText(r.article.url).then(()=>{v("Link copied to clipboard")}).catch(()=>{})}let A=0,S=0;P(()=>{r.nextArticleId&&c.prefetch(route("articles.show",r.nextArticleId),{method:"get"}),r.prevArticleId&&c.prefetch(route("articles.show",r.prevArticleId),{method:"get"});const l=sessionStorage.getItem("article-swipe-direction");if(l&&n.value){sessionStorage.removeItem("article-swipe-direction");const e=n.value;e.style.transition="none",e.style.transform=l==="next"?"translateX(60%)":"translateX(-60%)",e.style.opacity="0",e.offsetHeight,e.style.transition="transform 250ms ease-out, opacity 250ms ease-out",e.style.transform="translateX(0)",e.style.opacity="1",e.addEventListener("transitionend",()=>{e.style.transition="",e.style.transform="",e.style.opacity=""},{once:!0})}});function H(l){A=l.touches[0].clientX,S=l.touches[0].clientY}function O(l){if(p.value)return;const e=l.changedTouches[0].clientX-A,U=l.changedTouches[0].clientY-S,M=Math.abs(Math.atan2(U,e)*180/Math.PI);M>V&&M<180-V||(e<-B&&r.nextArticleId?(p.value=!0,sessionStorage.setItem("article-swipe-direction","next"),n.value&&(n.value.style.transition="transform 250ms ease-out, opacity 250ms ease-out",n.value.style.transform="translateX(-60%)",n.value.style.opacity="0"),setTimeout(()=>c.visit(route("articles.show",r.nextArticleId)),250)):e>B&&r.prevArticleId&&(p.value=!0,sessionStorage.setItem("article-swipe-direction","prev"),n.value&&(n.value.style.transition="transform 250ms ease-out, opacity 250ms ease-out",n.value.style.transform="translateX(60%)",n.value.style.opacity="0"),setTimeout(()=>c.visit(route("articles.show",r.prevArticleId)),250)))}return(l,e)=>(i(),s(I,null,[C(Y(G),{title:a.article.title},null,8,["title"]),C(z,null,{"header-left":f(()=>[t("button",{onClick:y,class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors -ml-2","aria-label":"Go back"},[...e[0]||(e[0]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1)])])]),title:f(()=>[m(u(a.article.feed?.title),1)]),"header-right":f(()=>[t("button",{onClick:L,disabled:h.value,class:R(["rounded-lg p-2 transition-colors",o.value?"text-blue-400 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200"]),"aria-label":o.value?"Remove from Read Later":"Save to Read Later"},[(i(),s("svg",{class:"h-5 w-5",fill:o.value?"currentColor":"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[1]||(e[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"},null,-1)])],8,Q))],10,W),t("button",{onClick:X,disabled:x.value,class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors","aria-label":"Mark as unread"},[...e[2]||(e[2]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 9v.906a2.25 2.25 0 01-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 001.183 1.981l6.478 3.488m8.839 2.51l-4.66-2.51m0 0l-1.023-.55a2.25 2.25 0 00-2.134 0l-1.022.55m0 0l-4.661 2.51m16.5 1.615a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V8.844a2.25 2.25 0 011.183-1.98l7.5-4.04a2.25 2.25 0 012.134 0l7.5 4.04a2.25 2.25 0 011.183 1.98V18"})],-1)])],8,J),a.article.url?(i(),s("button",{key:0,onClick:g,class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors","aria-label":"Open in browser"},[...e[3]||(e[3]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})],-1)])])):d("",!0),t("button",{onClick:N,class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors","aria-label":"Share article"},[...e[4]||(e[4]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"})],-1)])])]),default:f(()=>[t("div",K,[t("article",{ref_key:"articleEl",ref:n,class:"mx-auto max-w-3xl px-4 py-6",onTouchstartPassive:H,onTouchend:O},[t("header",Z,[t("h1",_,[a.article.url?(i(),s("a",{key:0,href:a.article.url,target:"_blank",rel:"noopener noreferrer",class:"hover:text-blue-500 dark:hover:text-blue-400 transition-colors"},u(a.article.title),9,$)):(i(),s(I,{key:1},[m(u(a.article.title),1)],64))]),t("div",ee,[t("div",te,[a.article.feed?.favicon_url?(i(),s("img",{key:0,src:a.article.feed.favicon_url,class:"h-4 w-4 rounded-sm",alt:""},null,8,re)):d("",!0),t("span",null,u(a.article.feed?.title),1)]),a.article.author?(i(),s("span",ae,"· "+u(a.article.author),1)):d("",!0),t("span",null,"· "+u(j.value)+" at "+u(E.value),1)])]),t("div",{class:"article-content prose max-w-none dark:prose-invert prose-headings:text-neutral-800 dark:prose-headings:text-neutral-200 prose-p:text-neutral-700 dark:prose-p:text-neutral-300 prose-a:text-blue-400 prose-a:no-underline hover:prose-a:underline prose-strong:text-neutral-800 dark:prose-strong:text-neutral-200 prose-code:text-blue-300 prose-pre:bg-neutral-50 dark:prose-pre:bg-neutral-900 prose-pre:border prose-pre:border-neutral-200 dark:prose-pre:border-neutral-800 prose-img:rounded-lg prose-blockquote:border-neutral-300 dark:prose-blockquote:border-neutral-700 prose-blockquote:text-neutral-500 dark:prose-blockquote:text-neutral-400",innerHTML:a.article.content||a.article.summary},null,8,le),!a.article.content&&!a.article.summary?(i(),s("div",oe,[e[5]||(e[5]=t("p",{class:"text-neutral-500 dark:text-neutral-400"},"No article content available.",-1)),a.article.url?(i(),s("button",{key:0,onClick:g,class:"mt-4 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors"}," Read on original site ")):d("",!0)])):d("",!0),t("footer",ne,[t("button",{onClick:y,class:"flex items-center gap-2 text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors"},[...e[6]||(e[6]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})],-1),m(" Back to articles ",-1)])]),t("div",se,[t("button",{onClick:L,disabled:h.value,class:R(["flex items-center gap-1.5 text-sm transition-colors",o.value?"text-blue-400":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"])},[(i(),s("svg",{class:"h-4 w-4",fill:o.value?"currentColor":"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"},null,-1)])],8,ue)),m(" "+u(o.value?"Saved":"Read Later"),1)],10,ie),a.article.url?(i(),s("button",{key:0,onClick:g,class:"flex items-center gap-1.5 text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors"},[...e[8]||(e[8]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})],-1),m(" Original ",-1)])])):d("",!0)])])],544)])]),_:1})],64))}};export{ke as default};
