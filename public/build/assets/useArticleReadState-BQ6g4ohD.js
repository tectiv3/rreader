import{B as f}from"./app-B2GclhLa.js";function u(a){window.__swReady?.then(t=>{t&&t.postMessage(a)})}function c(a){return new Promise(t=>{if(!window.__swReady){t(null);return}window.__swReady.then(i=>{if(!i){t(null);return}let e=!1;const n=new MessageChannel;n.port1.onmessage=s=>{e||(e=!0,n.port1.close(),t(s.data))},i.postMessage(a,[n.port2]),setTimeout(()=>{e||(e=!0,n.port1.close(),t(null))},500)})})}function p(){function a(e){u({type:"save-reading-state",state:e})}function t(){u({type:"clear-reading-state"})}async function i(){return c({type:"get-reading-state"})}return{saveReadingState:a,clearReadingState:t,loadReadingState:i}}const r=f(new Map);function g(){function a(e,n){r.has(e)||r.set(e,n)}function t(e){r.delete(e)}function i(e){if(r.size===0)return{};const n={};for(let s=0;s<e.length;s++){const o=e[s];if(!o.is_read&&r.has(o.id)){e[s]={...o,is_read:!0};const d=o.feed?.id||r.get(o.id);d&&(n[d]=(n[d]||0)-1)}}return n}return{markRead:a,markUnread:t,applyReadStates:i}}export{g as a,p as u};
