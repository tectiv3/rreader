import{u as q}from"./useDarkMode-CAs4OnFw.js";import{j as $,m as _,h as x,i as Q,g as k,o as d,c,F as C,r as B,n as g,d as e,t as W,u as s,J as V,K as J,C as y,e as E,b as P,f as K,a as G,H as U}from"./app-BdAcpLYc.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L=x(typeof navigator<"u"?navigator.onLine:!0),N=x(L.value?new Date:null);let S=0;function T(){L.value=!0,N.value=new Date}function D(){L.value=!1}function R(){return $(()=>{S===0&&(window.addEventListener("online",T),window.addEventListener("offline",D)),S++}),_(()=>{S--,S===0&&(window.removeEventListener("online",T),window.removeEventListener("offline",D))}),{isOnline:L,lastOnlineAt:N}}const I="rreader-offline-queue",p=x(X());let A=!1;function X(){try{const a=localStorage.getItem(I);return a?JSON.parse(a):[]}catch{return[]}}function Y(){try{localStorage.setItem(I,JSON.stringify(p.value))}catch{}}function Z(a,r,o={}){p.value.push({method:a,url:r,data:o,queuedAt:new Date().toISOString()}),Y()}function M(){if(A||p.value.length===0)return;A=!0;const a=[...p.value];p.value=[],Y();let r=Promise.resolve();for(const o of a)r=r.then(()=>new Promise(f=>{k[o.method](o.url,o.data,{preserveScroll:!0,preserveState:!0,onFinish:()=>f(),onError:()=>f()})}));r.finally(()=>{A=!1,p.value.length>0&&M()})}function ee(){const{isOnline:a}=R();return Q(a,r=>{r&&M()}),a.value&&p.value.length>0&&setTimeout(M,100),{queue:p,enqueue:Z,flushQueue:M}}const m=x([]);let te=0;function re(){function a(n,i="info",v=3e3){const h=te++;return m.value.push({id:h,message:n,type:i,leaving:!1}),v>0&&setTimeout(()=>r(h),v),h}function r(n){const i=m.value.find(v=>v.id===n);i&&(i.leaving=!0,setTimeout(()=>{m.value=m.value.filter(v=>v.id!==n)},300))}function o(n,i=3e3){return a(n,"success",i)}function f(n,i=4e3){return a(n,"error",i)}function l(n,i=3e3){return a(n,"info",i)}return{toasts:m,show:a,dismiss:r,success:o,error:f,info:l}}const ne={class:"fixed bottom-20 lg:bottom-6 inset-x-0 z-50 flex flex-col items-center gap-2 pointer-events-none px-4"},se={key:0,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},le={key:1,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},ae={key:2,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},oe=["onClick"],ie={__name:"ToastContainer",setup(a){const{toasts:r,dismiss:o}=re();return(f,l)=>(d(),c("div",ne,[(d(!0),c(C,null,B(s(r),n=>(d(),c("div",{key:n.id,class:g(["pointer-events-auto flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium shadow-lg transition-all duration-300",[n.type==="success"?"bg-green-600 text-white":n.type==="error"?"bg-red-600 text-white":"bg-neutral-300 dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100",n.leaving?"opacity-0 translate-y-2":"opacity-100 translate-y-0"]]),role:"status","aria-live":"polite"},[n.type==="success"?(d(),c("svg",se,[...l[0]||(l[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1)])])):n.type==="error"?(d(),c("svg",le,[...l[1]||(l[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"},null,-1)])])):(d(),c("svg",ae,[...l[2]||(l[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},null,-1)])])),e("span",null,W(n.message),1),e("button",{onClick:i=>s(o)(n.id),class:"ml-1 shrink-0 rounded p-0.5 opacity-70 hover:opacity-100 transition-opacity","aria-label":"Dismiss"},[...l[3]||(l[3]=[e("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,oe)],2))),128))]))}},de={},ue={class:"lg:hidden"},ce={class:"hidden lg:block"};function ve(a,r){return d(),c(C,null,[e("div",ue,[r[1]||(r[1]=e("div",{class:"border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2"},[e("div",{class:"h-3 w-16 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"})],-1)),(d(),c(C,null,B(6,o=>e("div",{key:o,class:"flex gap-3 border-b border-neutral-200/50 dark:border-neutral-800/50 px-4 py-3"},[r[0]||(r[0]=V('<div class="min-w-0 flex-1"><div class="flex items-center gap-2"><div class="h-3.5 w-3.5 animate-pulse rounded-sm bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3 w-20 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3 w-8 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div></div><div class="mt-2 h-4 w-full animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="mt-1.5 h-4 w-3/4 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="mt-1.5 h-3 w-full animate-pulse rounded bg-neutral-200/60 dark:bg-neutral-800/60"></div></div>',1)),e("div",{class:g(["h-16 w-16 shrink-0 animate-pulse rounded-lg bg-neutral-200 dark:bg-neutral-800",{hidden:o%3===0}])},null,2)])),64))]),e("div",ce,[r[3]||(r[3]=e("div",{class:"border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2"},[e("div",{class:"h-3 w-16 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"})],-1)),(d(),c(C,null,B(10,o=>e("div",{key:"d"+o,class:"flex items-center gap-3 border-b border-neutral-200/50 dark:border-neutral-800/50 px-4 py-2.5"},[...r[2]||(r[2]=[V('<div class="h-4 w-4 shrink-0 animate-pulse rounded-sm bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3 w-28 shrink-0 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3.5 flex-1 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="hidden xl:block h-3 w-48 shrink-0 animate-pulse rounded bg-neutral-200/60 dark:bg-neutral-800/60"></div><div class="h-3 w-10 shrink-0 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div>',5)])])),64))])],64)}const pe=F(de,[["render",ve]]),fe={class:"min-h-screen bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100"},ke={class:"sticky top-0 z-40 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 pt-safe"},ge={class:"flex h-14 items-center justify-between px-4"},he={class:"flex items-center gap-3"},be={class:"text-lg font-semibold text-neutral-900 dark:text-neutral-100"},xe={class:"flex items-center gap-2"},me=["title","aria-label"],we={key:0,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ye={key:1,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Se={key:0,class:"sticky top-14 z-30 flex items-center justify-center gap-2 bg-amber-600 px-4 py-1.5 text-xs font-medium text-white"},Ce={class:"pb-16 lg:pb-0"},Me={key:1,class:"page-enter"},Le={class:"flex h-14 items-center justify-around px-2"},z=10,je={__name:"AppLayout",setup(a){const{isDark:r,toggle:o}=q(),{isOnline:f}=R();ee();const l=U(),n=J("toggleSidebar",null),i=x(!1);let v=null,h=null;$(()=>{v=k.on("start",()=>{i.value=!0}),h=k.on("finish",()=>{i.value=!1})}),_(()=>{v?.(),h?.()});function O(u){k.get(route("articles.index",u),{},{preserveState:!1})}const w=x(!1);let j=0;function H(){const u=window.scrollY;u<z?w.value=!1:u>j+z?w.value=!0:u<j-z&&(w.value=!1),j=u}return $(()=>{window.addEventListener("scroll",H,{passive:!0})}),_(()=>{window.removeEventListener("scroll",H)}),(u,t)=>(d(),c("div",fe,[e("header",ke,[e("div",ge,[e("div",he,[y(u.$slots,"header-left",{},void 0,!0),e("h1",be,[y(u.$slots,"title",{},()=>[t[6]||(t[6]=E("RReader",-1))],!0)])]),e("div",xe,[y(u.$slots,"header-right",{},void 0,!0),e("button",{onClick:t[0]||(t[0]=(...b)=>s(o)&&s(o)(...b)),class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors",title:s(r)?"Switch to light mode":"Switch to dark mode","aria-label":s(r)?"Switch to light mode":"Switch to dark mode"},[s(r)?(d(),c("svg",we,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"},null,-1)])])):(d(),c("svg",ye,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"},null,-1)])]))],8,me)])])]),s(f)?P("",!0):(d(),c("div",Se,[...t[9]||(t[9]=[e("svg",{class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})],-1),E(" You're offline â€” viewing cached content ",-1)])])),e("main",Ce,[i.value?(d(),K(pe,{key:0})):(d(),c("div",Me,[y(u.$slots,"default",{},void 0,!0)]))]),G(ie),e("nav",{class:g(["fixed bottom-0 inset-x-0 z-40 border-t border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 lg:hidden pb-safe transition-transform duration-300",w.value?"translate-y-full":"translate-y-0"]),"aria-label":"Bottom navigation"},[e("div",Le,[e("button",{onClick:t[1]||(t[1]=b=>s(n)?s(n)():s(k).visit(u.route("articles.index"))),class:"flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors",title:"Open sidebar","aria-label":"Open sidebar"},[...t[10]||(t[10]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1),e("span",{class:"text-[10px]"},"Menu",-1)])]),e("button",{onClick:t[2]||(t[2]=b=>O({filter:"read_later"})),class:g(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",s(l).props.activeFilter==="read_later"?"text-amber-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Read Later","aria-label":"Read Later"},[...t[11]||(t[11]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1),e("span",{class:"text-[10px]"},"Read Later",-1)])],2),e("button",{onClick:t[3]||(t[3]=b=>O({})),class:g(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",!s(l).props.activeFilter&&!s(l).props.activeFeedId&&!s(l).props.activeCategoryId&&s(l).url.startsWith("/articles")&&!s(l).url.startsWith("/articles/search")?"text-blue-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"All feeds","aria-label":"All feeds"},[...t[12]||(t[12]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})],-1),e("span",{class:"text-[10px]"},"Feeds",-1)])],2),e("button",{onClick:t[4]||(t[4]=b=>s(k).visit(u.route("feeds.create"))),class:g(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",s(l).url.startsWith("/feeds/create")?"text-blue-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Add feed","aria-label":"Add feed"},[...t[13]||(t[13]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3"})],-1),e("span",{class:"text-[10px]"},"Add",-1)])],2),e("button",{onClick:t[5]||(t[5]=b=>s(k).visit(u.route("articles.search"))),class:g(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",s(l).url.startsWith("/articles/search")?"text-blue-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Search","aria-label":"Search"},[...t[14]||(t[14]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),e("span",{class:"text-[10px]"},"Search",-1)])],2)])],2)]))}},_e=F(je,[["__scopeId","data-v-da8a0419"]]);export{_e as A,ee as a,re as b,R as u};
