import{y as x,a as u,s as h}from"./app-DQQxaQue.js";const M=x("sidebar",()=>{const d=u([]),c=u([]),n=u(0),o=u(0),r=u(0),i=u(!1);function f(e){d.value=e.categories??[],c.value=e.uncategorizedFeeds??[],n.value=e.totalUnread??0,o.value=e.readLaterCount??0,r.value=e.todayCount??0,i.value=!0}async function v(){const e=await h.get("/api/sidebar");d.value=e.data.categories,c.value=e.data.uncategorizedFeeds,n.value=e.data.totalUnread??0,o.value=e.data.readLaterCount??0,r.value=e.data.todayCount??0,i.value=!0}function s(e){for(const a of d.value){const l=a.feeds.find(C=>C.id===e);if(l)return{feed:l,category:a}}const t=c.value.find(a=>a.id===e);return t?{feed:t,category:null}:null}function g(e,t=1){const a=s(e);a&&(a.feed.unread_count=Math.max(0,(a.feed.unread_count||0)-t),a.category&&(a.category.unread_count=Math.max(0,(a.category.unread_count||0)-t)),n.value=Math.max(0,n.value-t))}function y(e,t=1){const a=s(e);a&&(a.feed.unread_count=(a.feed.unread_count||0)+t,a.category&&(a.category.unread_count=(a.category.unread_count||0)+t),n.value+=t)}function m(e){o.value=Math.max(0,o.value+e)}function _(e){r.value=Math.max(0,r.value+e)}return{categories:d,uncategorizedFeeds:c,totalUnread:n,readLaterCount:o,todayCount:r,loaded:i,initialize:f,fetchSidebar:v,decrementFeedUnread:g,incrementFeedUnread:y,adjustReadLaterCount:m,adjustTodayCount:_}});export{M as u};
