import{x as Le,z as Te,S as De,w as W,U as Re,a as f,o as Be,b as ze,n as G,g as n,h as t,u as d,l as ke,t as v,k as u,j as y,m as Ve,N as Ee,D as I,F as k,p as H,E as m,s as Fe,c as a,i as S,V as $e}from"./app-CZSjId66.js";import{u as Ne}from"./useArticleStore-0mtmbED3.js";import{u as Ie}from"./useSidebarStore-CT2MGwMZ.js";import{u as He,a as qe}from"./useAddFeedModal-CCx7KW6r.js";import{u as Ue}from"./useToast-Y0LObP4D.js";import{_ as Xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Oe={class:"flex h-11 items-center justify-between px-4"},Pe={class:"flex items-center gap-2 min-w-0"},Ye={class:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 truncate"},We={key:0,class:"ml-1 inline-flex items-center rounded-full bg-blue-600 px-2 py-0.5 text-xs font-medium text-white"},Ge={class:"flex items-center gap-1 shrink-0"},Ke=["disabled","title","aria-label"],Ze=["disabled"],Je={key:0,class:"border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50 px-4 py-3"},Qe={class:"flex items-start gap-3"},et=["src"],tt={class:"min-w-0 flex-1"},rt={class:"text-sm font-semibold text-neutral-900 dark:text-neutral-100"},nt={key:0,class:"mt-1 text-xs text-neutral-600 dark:text-neutral-400 line-clamp-3"},at=["href"],lt={key:2,class:"flex",style:{height:"calc(100vh - 2.75rem - env(safe-area-inset-top, 0px))"}},ot={class:"sticky top-0 z-10 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2 backdrop-blur"},st={class:"text-xs font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-500"},it=["id","onClick"],ut=["src"],dt=["onClick"],ct={key:0,class:"hidden xl:block w-64 shrink-0 truncate text-xs text-neutral-500 dark:text-neutral-600"},vt={class:"w-12 shrink-0 text-right text-xs text-neutral-500 dark:text-neutral-600"},kt=["onClick"],pt={key:2,class:"flex shrink-0 items-center gap-0.5"},ft=["title"],xt=["fill"],mt=["href"],ht=["id"],bt={key:0,class:"flex items-center justify-center py-12"},gt={key:1,class:"mx-auto max-w-3xl px-6 pt-5 pb-6"},yt={class:"flex flex-wrap items-center gap-x-2 text-xs text-neutral-500 dark:text-neutral-500 mb-4"},wt={key:0},_t={key:1},Mt=["src","alt"],Ct=["innerHTML"],At={key:1,class:"py-12 text-center"},St=["href"],jt={key:0,class:"flex justify-center py-6"},Lt={key:1,class:"py-6 text-center text-sm text-neutral-500 dark:text-neutral-600"},Tt={key:1,class:"flex flex-col items-center justify-center px-4 py-20 text-center"},Dt={class:"flex flex-col items-center gap-1"},Rt={key:0,class:"text-[10px] text-neutral-600 dark:text-neutral-500"},Bt={key:1,class:"text-[10px] text-neutral-600 dark:text-neutral-500"},zt={key:0,class:"flex flex-col items-center justify-center px-4 py-20 text-center"},Vt={key:1},Et={class:"sticky z-10 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2 backdrop-blur",style:{top:"calc(2.75rem + env(safe-area-inset-top, 0px))"}},Ft={class:"text-xs font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-500"},$t={key:0,class:"absolute inset-0 flex items-center bg-neutral-800 px-6"},Nt={class:"ml-2 text-sm font-medium text-white uppercase tracking-wide"},It={key:1,class:"absolute inset-0 flex items-center justify-end bg-neutral-800 px-6"},Ht={class:"ml-2 text-sm font-medium text-white uppercase tracking-wide"},qt=["onClick","onTouchstart","onTouchmove","onTouchend"],Ut={class:"min-w-0 flex-1"},Xt={class:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-500"},Ot=["src"],Pt=["onClick"],Yt={class:"shrink-0"},Wt={key:0,class:"mt-0.5 line-clamp-2 text-xs text-neutral-600 dark:text-neutral-500"},Gt=["src","alt"],Kt={key:0,class:"flex justify-center py-6"},Zt={key:1,class:"py-6 text-center text-sm text-neutral-500 dark:text-neutral-600"},K=80,pe=80,Z=10,Jt=Object.assign({name:"ArticleListView"},{__name:"ArticleListView",setup(Qt){const o=Ne(),h=Ie(),q=Le(),w=Te();He();const{success:U}=Ue(),{openAddFeedModal:E}=qe(),fe=De("toggleSidebar");function J(){const r=w.query;return r.filter?{type:r.filter}:r.feed_id?{type:"feed",feedId:Number(r.feed_id)}:r.category_id?{type:"category",categoryId:Number(r.category_id)}:{type:"all"}}o.fetchArticles(J()),W(()=>o.filterTitle,r=>Re(r),{immediate:!0}),W(()=>w.query,()=>{w.name==="articles.index"&&(T(),B.value=!1,o.fetchArticles(J()))},{deep:!0});const b=m(()=>w.query.feed_id?Number(w.query.feed_id):null),Q=m(()=>w.query.category_id?Number(w.query.category_id):null),R=m(()=>w.query.filter||null),ee=m(()=>{if(R.value==="read_later")return h.readLaterCount;if(R.value==="today")return h.todayCount;if(R.value==="recently_read")return 0;if(b.value){for(const e of h.categories){const s=e.feeds.find(p=>p.id===b.value);if(s)return s.unread_count||0}return h.uncategorizedFeeds.find(e=>e.id===b.value)?.unread_count||0}return Q.value?h.categories.find(e=>e.id===Q.value)?.unread_count||0:h.totalUnread}),X=m(()=>!!b.value),x=m(()=>{if(!b.value)return null;for(const r of h.categories){const e=r.feeds.find(s=>s.id===b.value);if(e)return e}return h.uncategorizedFeeds.find(r=>r.id===b.value)||null}),B=f(!1),te=m(()=>{let r=h.uncategorizedFeeds.length;for(const e of h.categories)r+=e.feeds?.length||0;return r}),j=m(()=>{const r={},e=new Date;e.setHours(0,0,0,0);const s=new Date(e);s.setDate(s.getDate()-1);for(const p of o.articles){const l=new Date(p.published_at);l.setHours(0,0,0,0);let c;l.getTime()===e.getTime()?c="Today":l.getTime()===s.getTime()?c="Yesterday":c=l.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),r[c]||(r[c]=[]),r[c].push(p)}return r});function re(r){const e=new Date,s=new Date(r),p=Math.floor((e-s)/1e3);if(p<60)return"just now";const l=Math.floor(p/60);if(l<60)return`${l}m`;const c=Math.floor(l/60);if(c<24)return`${c}h`;const ve=Math.floor(c/24);return ve<7?`${ve}d`:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}const L=f(typeof window<"u"&&window.innerWidth>=1024),g=f(null),i=f(null),F=f(!1),C=f(!1),xe=f(null),z=f(null);function ne(){L.value=window.innerWidth>=1024}let V=null;Be(()=>{window.addEventListener("resize",ne),window.addEventListener("keydown",ie),V=new IntersectionObserver(r=>{r[0].isIntersecting&&o.hasMore&&!o.loadingMore&&o.loadMore()},{rootMargin:"200px"}),z.value&&V.observe(z.value)}),ze(()=>{window.removeEventListener("resize",ne),window.removeEventListener("keydown",ie),V?.disconnect()}),W(z,r=>{V?.disconnect(),r&&V?.observe(r)});function $(r){if(r.is_read||o.markRead(r.id),L.value){if(g.value===r.id){T();return}g.value=r.id,me(r.id)}else q.push({name:"articles.show",params:{id:r.id}})}async function me(r){const e=o.getContent(r);if(e){i.value=e,C.value=e.is_read_later||!1,F.value=!1,await G(),ae(r),o.prefetchAdjacent(r);return}F.value=!0;try{const s=await o.fetchContent(r);i.value=s,C.value=s.is_read_later||!1,await G(),ae(r),o.prefetchAdjacent(r)}catch{q.push({name:"articles.show",params:{id:r}})}finally{F.value=!1}}function ae(r){const e=document.getElementById(`article-expanded-${r}`);e&&e.scrollIntoView({block:"start",behavior:"smooth"})}function T(){i.value=null,g.value=null}function le(r){T(),q.push({name:"articles.index",query:{feed_id:r}})}function oe(){i.value&&(o.toggleReadLater(i.value.id),C.value=!C.value,U(C.value?"Article saved":"Removed from Read Later"))}function se(){i.value&&(o.markUnread(i.value.id),U("Marked as unread"))}const he=m(()=>i.value?.image_url?!(i.value.content||i.value.summary||"").includes(i.value.image_url):!1),be=m(()=>i.value?new Date(i.value.published_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""),ge=m(()=>i.value?new Date(i.value.published_at).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):""),O=m(()=>g.value?o.articles.findIndex(r=>r.id===g.value):-1);function ie(r){if(L.value&&!(r.target.tagName==="INPUT"||r.target.tagName==="TEXTAREA"||r.target.isContentEditable)&&w.name==="articles.index")switch(r.key){case"ArrowRight":case"j":{r.preventDefault();const e=O.value+1;e<o.articles.length&&$(o.articles[e]);break}case"ArrowLeft":case"k":{r.preventDefault();const e=O.value-1;e>=0&&$(o.articles[e]);break}case"s":{r.preventDefault(),i.value&&oe();break}case"m":{if(r.preventDefault(),i.value){const e=O.value;se(),T();const s=o.articles[e+1];s&&(g.value=s.id,G(()=>{document.getElementById(`article-row-${s.id}`)?.scrollIntoView({block:"nearest",behavior:"smooth"})}))}break}case"Escape":{r.preventDefault(),T();break}}}const P=f(!1);function ye(){P.value=!0,o.markAllRead(b.value),P.value=!1,U("All marked as read")}const N=f(!1);async function ue(){N.value=!0;try{if(b.value){const r=x.value?.disabled_at?`/api/feeds/${b.value}/reenable`:`/api/feeds/${b.value}/refresh`;await Fe.post(r)}await Promise.all([o.forceRefresh(),h.fetchSidebar()])}finally{N.value=!1}}const _=f(0),D=f(!1),M=f(!1);let de=0;function we(r){window.scrollY>0||M.value||(de=r.touches[0].clientY,D.value=!0)}function _e(r){if(!D.value||M.value)return;if(window.scrollY>0){D.value=!1,_.value=0;return}const e=r.touches[0].clientY-de;e>0&&(_.value=Math.min(e*.5,120))}async function Me(){D.value&&(D.value=!1,_.value>=K&&!M.value&&(M.value=!0,_.value=60,await ue(),M.value=!1),_.value=0)}const A=f({});function Ce(r,e){A.value[r]={startX:e.touches[0].clientX,startY:e.touches[0].clientY,currentX:0,swiping:!1,directionLocked:!1}}function Ae(r,e){const s=A.value[r];if(!s)return;const p=e.touches[0].clientX-s.startX,l=e.touches[0].clientY-s.startY;if(!s.directionLocked&&(Math.abs(p)>Z||Math.abs(l)>Z)&&(s.directionLocked=!0,Math.abs(l)>Math.abs(p))){delete A.value[r];return}s.directionLocked&&Math.abs(p)>Z&&(s.swiping=!0,s.currentX=Math.max(Math.min(p,200),-200))}function Se(r,e){const s=A.value[r];s&&(s.currentX<-pe?e.is_read?o.markUnread(e.id):o.markRead(e.id):s.currentX>pe&&o.toggleReadLater(e.id),delete A.value[r])}function je(r){const e=A.value[r];return!e||!e.swiping?{}:{transform:`translateX(${e.currentX}px)`,transition:"none"}}function Y(r){return A.value[r]?.swiping||!1}function ce(r){const e=A.value[r];return!e||!e.swiping?null:e.currentX>0?"right":"left"}return(r,e)=>(a(),n(k,null,[t("header",{class:y(L.value?"sticky top-0 z-30 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 pt-safe":"fixed top-0 inset-x-0 z-30 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 pt-safe")},[t("div",Oe,[t("div",Pe,[t("button",{onClick:e[0]||(e[0]=s=>d(fe)()),class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors -ml-2",title:"Open sidebar","aria-label":"Open sidebar"},[...e[7]||(e[7]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])]),t("h1",Ye,[ke(v(d(o).filterTitle)+" ",1),ee.value>0?(a(),n("span",We,v(ee.value),1)):u("",!0)])]),t("div",Ge,[X.value?(a(),n("button",{key:0,onClick:e[1]||(e[1]=s=>B.value=!B.value),class:y(["rounded-lg p-2 transition-colors cursor-pointer",B.value?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30":"text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Feed info","aria-label":"Feed info"},[...e[8]||(e[8]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})],-1)])],2)):u("",!0),Ve(t("button",{onClick:ue,disabled:N.value,class:y(["rounded-lg p-2 transition-colors cursor-pointer",x.value?.disabled_at?"text-amber-500 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30":"text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:x.value?.disabled_at?"Feed is broken — click to retry":"Refresh feed","aria-label":x.value?.disabled_at?"Retry broken feed":"Refresh feed"},[(a(),n("svg",{class:y(["h-5 w-5 transition-transform",{"animate-spin":N.value}]),fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[9]||(e[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182M2.985 19.644l3.181-3.182"},null,-1)])],2))],10,Ke),[[Ee,d(o).articles.length>0||!d(o).loading]]),d(o).unreadCount>0?(a(),n("button",{key:1,onClick:ye,disabled:P.value,class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors cursor-pointer",title:"Mark all as read","aria-label":"Mark all as read"},[...e[10]||(e[10]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])],8,Ze)):u("",!0)])])],2),B.value&&x.value?(a(),n("div",Je,[t("div",Qe,[x.value.favicon_url?(a(),n("img",{key:0,src:x.value.favicon_url,class:"h-8 w-8 shrink-0 rounded-md mt-0.5",alt:""},null,8,et)):u("",!0),t("div",tt,[t("h2",rt,v(x.value.title),1),x.value.description?(a(),n("p",nt,v(x.value.description),1)):u("",!0),x.value.site_url?(a(),n("a",{key:1,href:x.value.site_url,target:"_blank",rel:"noopener noreferrer",class:"mt-1.5 inline-flex items-center gap-1 text-xs text-blue-500 dark:text-blue-400 hover:underline"},[e[11]||(e[11]=t("svg",{class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})],-1)),ke(" "+v(x.value.site_url.replace(/^https?:\/\//,"").replace(/\/$/,"")),1)],8,at)):u("",!0)])])])):u("",!0),d(o).loading&&d(o).articles.length===0?(a(),n("div",{key:1,class:"flex items-center justify-center py-20",style:I(L.value?"":"margin-top: calc(2.75rem + env(safe-area-inset-top, 0px))")},[...e[12]||(e[12]=[t("svg",{class:"h-8 w-8 animate-spin text-neutral-400",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])],4)):L.value?(a(),n("div",lt,[t("div",{ref_key:"articleListEl",ref:xe,class:"flex-1 flex flex-col overflow-y-auto pr-2"},[d(o).articles.length>0?(a(),n(k,{key:0},[(a(!0),n(k,null,H(j.value,(s,p)=>(a(),n(k,{key:p},[t("div",ot,[t("h2",st,v(p),1)]),t("div",null,[(a(!0),n(k,null,H(s,l=>(a(),n(k,{key:l.id},[t("div",{id:`article-row-${l.id}`,class:y(["flex w-full items-center gap-3 border-b border-neutral-200/50 dark:border-neutral-800/50 px-4 py-2.5 text-left transition-colors",[g.value===l.id?"sticky top-0 z-10 bg-white/95 dark:bg-neutral-950/95 backdrop-blur border-b-neutral-200 dark:border-b-neutral-800":"group/row cursor-pointer hover:bg-neutral-50 dark:hover:bg-neutral-900/50"]]),onClick:c=>g.value!==l.id&&$(l)},[X.value?u("",!0):(a(),n(k,{key:0},[l.feed_favicon_url?(a(),n("img",{key:0,src:l.feed_favicon_url,class:"h-4 w-4 shrink-0 rounded-sm",alt:""},null,8,ut)):u("",!0),t("span",{class:"w-32 shrink-0 truncate text-xs text-neutral-600 dark:text-neutral-500 hover:underline cursor-pointer",onClick:S(c=>le(l.feed_id),["stop"])},v(l.feed_title),9,dt)],64)),t("h3",{class:y(["min-w-0 flex-1 truncate text-sm",l.is_read?"text-neutral-600 dark:text-neutral-500 font-normal":"text-neutral-900 dark:text-neutral-100 font-medium"])},v(l.title),3),g.value!==l.id?(a(),n(k,{key:1},[l.summary?(a(),n("span",ct,v(l.summary),1)):u("",!0),t("span",vt,v(re(l.published_at)),1),t("span",{onClick:S(c=>d(o).dismissArticle(l.id),["stop"]),class:"w-6 shrink-0 flex items-center justify-center opacity-0 group-hover/row:opacity-100 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 transition-opacity cursor-pointer",title:"Dismiss — mark read & hide"},[...e[13]||(e[13]=[t("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,kt)],64)):(a(),n("div",pt,[t("button",{onClick:S(oe,["stop"]),class:y(["rounded-lg p-1.5 transition-colors cursor-pointer",C.value?"text-blue-500 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-600 dark:hover:text-neutral-300"]),title:C.value?"Remove from Read Later":"Save to Read Later"},[(a(),n("svg",{class:"h-4 w-4",fill:C.value?"currentColor":"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[14]||(e[14]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"},null,-1)])],8,xt))],10,ft),t("button",{onClick:S(se,["stop"]),class:"rounded-lg p-1.5 text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors cursor-pointer",title:"Mark as unread"},[...e[15]||(e[15]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 9v.906a2.25 2.25 0 01-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 001.183 1.981l6.478 3.488m8.839 2.51l-4.66-2.51m0 0l-1.023-.55a2.25 2.25 0 00-2.134 0l-1.022.55m0 0l-4.661 2.51m16.5 1.615a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V8.844a2.25 2.25 0 011.183-1.98l7.5-4.04a2.25 2.25 0 012.134 0l7.5 4.04a2.25 2.25 0 011.183 1.98V18"})],-1)])]),i.value?.url?(a(),n("a",{key:0,href:i.value.url,target:"_blank",rel:"noopener noreferrer",onClick:e[2]||(e[2]=S(()=>{},["stop"])),class:"rounded-lg p-1.5 text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors",title:"Open original"},[...e[16]||(e[16]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})],-1)])],8,mt)):u("",!0),t("button",{onClick:S(T,["stop"]),class:"rounded-lg p-1.5 text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors cursor-pointer",title:"Collapse (Esc)"},[...e[17]||(e[17]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})],-1)])])]))],10,it),g.value===l.id?(a(),n("div",{key:0,id:`article-expanded-${l.id}`,class:"border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50"},[F.value&&!i.value?(a(),n("div",bt,[...e[18]||(e[18]=[t("svg",{class:"h-8 w-8 animate-spin text-neutral-400",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):u("",!0),i.value?(a(),n("article",gt,[t("div",yt,[i.value.author?(a(),n("span",wt,v(i.value.author),1)):u("",!0),i.value.author?(a(),n("span",_t,"·")):u("",!0),t("span",null,v(be.value)+" at "+v(ge.value),1)]),he.value?(a(),n("img",{key:0,src:i.value.image_url,alt:i.value.title,class:"mb-6 w-full max-h-80 object-cover rounded-lg",loading:"lazy"},null,8,Mt)):u("",!0),t("div",{class:"article-content prose max-w-none dark:prose-invert prose-headings:text-neutral-800 dark:prose-headings:text-neutral-200 prose-p:text-neutral-700 dark:prose-p:text-neutral-300 prose-a:text-blue-500 prose-a:no-underline hover:prose-a:underline prose-strong:text-neutral-800 dark:prose-strong:text-neutral-200 prose-code:text-blue-600 dark:prose-code:text-blue-300 prose-pre:bg-white dark:prose-pre:bg-neutral-900 prose-pre:border prose-pre:border-neutral-200 dark:prose-pre:border-neutral-800 prose-img:rounded-lg prose-blockquote:border-neutral-300 dark:prose-blockquote:border-neutral-700 prose-blockquote:text-neutral-500 dark:prose-blockquote:text-neutral-400",innerHTML:i.value.content||i.value.summary},null,8,Ct),!i.value.content&&!i.value.summary?(a(),n("div",At,[e[19]||(e[19]=t("p",{class:"text-neutral-500 dark:text-neutral-400"}," No article content available. ",-1)),i.value.url?(a(),n("a",{key:0,href:i.value.url,target:"_blank",rel:"noopener noreferrer",class:"mt-4 inline-block rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors"}," Read on original site ",8,St)):u("",!0)])):u("",!0),e[20]||(e[20]=$e('<div class="mt-8 border-t border-neutral-200 dark:border-neutral-800 pt-4 text-xs text-neutral-400 dark:text-neutral-600" data-v-4ea14e57><span class="font-medium text-neutral-500" data-v-4ea14e57>Shortcuts:</span><span class="ml-2" data-v-4ea14e57><kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-4ea14e57>j</kbd>/<kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-4ea14e57>k</kbd> or <kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-4ea14e57>←</kbd>/<kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-4ea14e57>→</kbd> navigate</span><span class="ml-2" data-v-4ea14e57><kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-4ea14e57>s</kbd> save</span><span class="ml-2" data-v-4ea14e57><kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-4ea14e57>m</kbd> mark unread</span><span class="ml-2" data-v-4ea14e57><kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-4ea14e57>Esc</kbd> close</span></div>',1))])):u("",!0)],8,ht)):u("",!0)],64))),128))])],64))),128)),t("div",{ref_key:"loadMoreSentinel",ref:z,class:"h-px"},null,512),d(o).loadingMore?(a(),n("div",jt,[...e[21]||(e[21]=[t("svg",{class:"h-6 w-6 animate-spin text-neutral-400",viewBox:"0 0 24 24",fill:"none"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)])])):u("",!0),!d(o).hasMore&&d(o).loaded&&j.value&&Object.keys(j.value).length>0?(a(),n("div",Lt," No more articles ")):u("",!0)],64)):(a(),n("div",Tt,[R.value==="read_later"?(a(),n(k,{key:0},[e[22]||(e[22]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[23]||(e[23]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No saved articles ",-1)),e[24]||(e[24]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Save articles from your feeds to read later. ",-1))],64)):te.value===0?(a(),n(k,{key:1},[e[25]||(e[25]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[26]||(e[26]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No articles yet ",-1)),e[27]||(e[27]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Subscribe to feeds to start seeing articles here. ",-1)),t("button",{type:"button",onClick:e[3]||(e[3]=s=>d(E)()),class:"mt-4 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors cursor-pointer"}," Add a Feed ")],64)):(a(),n(k,{key:2},[e[28]||(e[28]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[29]||(e[29]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No articles yet ",-1)),e[30]||(e[30]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Subscribe to feeds to start seeing articles here. ",-1)),t("button",{type:"button",onClick:e[4]||(e[4]=s=>d(E)()),class:"mt-4 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors cursor-pointer"}," Add a Feed ")],64))]))],512)])):(a(),n(k,{key:3},[e[45]||(e[45]=t("div",{style:{height:"calc(2.75rem + env(safe-area-inset-top, 0px))"}},null,-1)),t("div",{class:y(["flex items-center justify-center overflow-hidden transition-all duration-200",{"transition-none":D.value}]),style:I({height:_.value+"px"})},[t("div",Dt,[(a(),n("svg",{class:y(["h-5 w-5 text-neutral-500 dark:text-neutral-400 transition-transform duration-200",{"animate-spin":M.value}]),style:I(M.value?{}:{transform:`rotate(${Math.min(_.value/K,1)*360}deg)`}),fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[31]||(e[31]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182M2.985 19.644l3.181-3.182"},null,-1)])],6)),!M.value&&_.value>=K?(a(),n("span",Rt,"Release to refresh")):M.value?(a(),n("span",Bt,"Refreshing...")):u("",!0)])],6),t("div",{onTouchstartPassive:we,onTouchmovePassive:_e,onTouchend:Me},[d(o).articles.length===0&&!d(o).loading?(a(),n("div",zt,[R.value==="read_later"?(a(),n(k,{key:0},[e[32]||(e[32]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[33]||(e[33]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No saved articles ",-1)),e[34]||(e[34]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Save articles from your feeds to read later. ",-1))],64)):te.value===0?(a(),n(k,{key:1},[e[35]||(e[35]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[36]||(e[36]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No articles yet ",-1)),e[37]||(e[37]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Subscribe to feeds to start seeing articles here. ",-1)),t("button",{type:"button",onClick:e[5]||(e[5]=s=>d(E)()),class:"mt-4 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors cursor-pointer"}," Add a Feed ")],64)):(a(),n(k,{key:2},[e[38]||(e[38]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[39]||(e[39]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No articles yet ",-1)),e[40]||(e[40]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Subscribe to feeds to start seeing articles here. ",-1)),t("button",{type:"button",onClick:e[6]||(e[6]=s=>d(E)()),class:"mt-4 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors cursor-pointer"}," Add a Feed ")],64))])):d(o).articles.length>0?(a(),n("div",Vt,[(a(!0),n(k,null,H(j.value,(s,p)=>(a(),n(k,{key:p},[t("div",Et,[t("h2",Ft,v(p),1)]),t("div",null,[(a(!0),n(k,null,H(s,l=>(a(),n("div",{key:l.id,class:"relative overflow-hidden border-b border-neutral-200/50 dark:border-neutral-800/50 bg-neutral-200 dark:bg-neutral-800"},[Y(l.id)&&ce(l.id)==="right"?(a(),n("div",$t,[e[41]||(e[41]=t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1)),t("span",Nt,v(l.is_read_later?"Saved":"Read Later"),1)])):u("",!0),Y(l.id)&&ce(l.id)==="left"?(a(),n("div",It,[e[42]||(e[42]=t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1)),t("span",Ht,v(l.is_read?"Mark as Unread":"Mark as Read"),1)])):u("",!0),t("button",{onClick:c=>!Y(l.id)&&$(l),onTouchstart:c=>Ce(l.id,c),onTouchmove:c=>Ae(l.id,c),onTouchend:c=>Se(l.id,l),class:"relative flex w-full gap-3 bg-white dark:bg-neutral-950 px-4 py-3 text-left transition-colors hover:bg-neutral-50 dark:hover:bg-neutral-900/50 active:bg-neutral-100 dark:active:bg-neutral-800/50",style:I(je(l.id))},[t("div",Ut,[t("div",Xt,[X.value?u("",!0):(a(),n(k,{key:0},[l.feed_favicon_url?(a(),n("img",{key:0,src:l.feed_favicon_url,class:"h-3.5 w-3.5 rounded-sm",alt:""},null,8,Ot)):u("",!0),t("span",{class:"truncate hover:underline",onClick:S(c=>le(l.feed_id),["stop"])},v(l.feed_title),9,Pt),e[43]||(e[43]=t("span",null,"·",-1))],64)),t("span",Yt,v(re(l.published_at)),1)]),t("h3",{class:y(["mt-1 text-sm leading-snug",l.is_read?"text-neutral-600 dark:text-neutral-500 font-normal":"text-neutral-900 dark:text-neutral-100 font-semibold"])},v(l.title),3),l.summary?(a(),n("p",Wt,v(l.summary),1)):u("",!0)]),l.image_url?(a(),n("img",{key:0,src:l.image_url,class:"h-16 w-16 shrink-0 rounded-lg object-cover",alt:l.title,loading:"lazy"},null,8,Gt)):u("",!0)],44,qt)]))),128))])],64))),128)),t("div",{ref_key:"loadMoreSentinel",ref:z,class:"h-px"},null,512),d(o).loadingMore?(a(),n("div",Kt,[...e[44]||(e[44]=[t("svg",{class:"h-6 w-6 animate-spin text-neutral-400",viewBox:"0 0 24 24",fill:"none"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)])])):u("",!0),!d(o).hasMore&&d(o).loaded&&j.value&&Object.keys(j.value).length>0?(a(),n("div",Zt," No more articles ")):u("",!0)])):u("",!0)],32)],64))],64))}}),or=Xe(Jt,[["__scopeId","data-v-4ea14e57"]]);export{or as default};
