import{x as Le,z as Te,S as Be,w as Y,U as De,a as x,o as ze,b as Re,n as W,g as n,h as t,u as d,l as ke,t as p,k as u,j as w,m as $e,N as Ve,D as E,F as c,p as q,E as m,s as Ee,c as a,i as j,V as Ne}from"./app-fYyLp7hJ.js";import{u as Fe}from"./useArticleStore-DHeJUIin.js";import{u as Ie}from"./useSidebarStore-hJj8wdsc.js";import{u as He,a as qe}from"./useAddFeedModal-DqKlu_Dq.js";import{u as Ue}from"./useToast-SUxwDskE.js";import{_ as Xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Oe={class:"flex h-11 items-center justify-between border-b border-neutral-200 dark:border-neutral-800 px-4"},Pe={class:"flex items-center gap-2 min-w-0"},Ye={class:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 truncate"},We={key:0,class:"ml-1 inline-flex items-center rounded-full bg-blue-600 px-2 py-0.5 text-xs font-medium text-white"},Ze={class:"flex items-center gap-1 shrink-0"},Ge=["disabled","title","aria-label"],Ke=["disabled"],Je={class:"flex items-start gap-3"},Qe=["src"],et={class:"min-w-0 flex-1"},tt={class:"text-sm font-semibold text-neutral-900 dark:text-neutral-100"},rt={key:0,class:"mt-1 text-xs text-neutral-600 dark:text-neutral-400 line-clamp-3"},nt=["href"],at={key:2,class:"flex",style:{height:"calc(100vh - 2.75rem - env(safe-area-inset-top, 0px))"}},lt={class:"sticky top-0 z-10 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2 backdrop-blur"},ot={class:"text-xs font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-500"},st=["id","onClick"],it=["src"],ut=["onClick"],dt={class:"w-12 shrink-0 text-right text-xs text-neutral-500 dark:text-neutral-600"},ct=["onClick"],vt={key:2,class:"flex shrink-0 items-center gap-0.5"},kt=["title"],pt=["fill"],xt=["href"],ft=["id"],mt={key:0,class:"flex items-center justify-center py-12"},ht={key:1,class:"mx-auto max-w-3xl px-6 pt-5 pb-6"},gt={class:"flex flex-wrap items-center gap-x-2 text-xs text-neutral-500 dark:text-neutral-500 mb-4"},bt={key:0},wt={key:1},yt=["src","alt"],_t=["innerHTML"],Mt={key:1,class:"py-12 text-center"},Ct=["href"],At={key:0,class:"flex justify-center py-6"},St={key:1,class:"py-6 text-center text-sm text-neutral-500 dark:text-neutral-600"},jt={key:1,class:"flex flex-col items-center justify-center px-4 py-20 text-center"},Lt={class:"flex flex-col items-center gap-1"},Tt={key:0,class:"text-[10px] text-neutral-600 dark:text-neutral-500"},Bt={key:1,class:"text-[10px] text-neutral-600 dark:text-neutral-500"},Dt={key:0,class:"flex flex-col items-center justify-center px-4 py-20 text-center"},zt={key:1},Rt={class:"sticky z-10 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2 backdrop-blur",style:{top:"calc(2.75rem + env(safe-area-inset-top, 0px))"}},$t={class:"text-xs font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-500"},Vt={key:0,class:"absolute inset-0 flex items-center bg-neutral-800 px-6"},Et={class:"ml-2 text-sm font-medium text-white uppercase tracking-wide"},Nt={key:1,class:"absolute inset-0 flex items-center justify-end bg-neutral-800 px-6"},Ft={class:"ml-2 text-sm font-medium text-white uppercase tracking-wide"},It=["onClick","onTouchstart","onTouchmove","onTouchend"],Ht={class:"min-w-0 flex-1"},qt={class:"mt-1 flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-500"},Ut=["src"],Xt=["onClick"],Ot={class:"shrink-0"},Pt=["src","alt"],Yt={key:0,class:"flex justify-center py-6"},Wt={key:1,class:"py-6 text-center text-sm text-neutral-500 dark:text-neutral-600"},Z=80,pe=80,G=10,Zt=Object.assign({name:"ArticleListView"},{__name:"ArticleListView",setup(Gt){const o=Fe(),h=Ie(),N=Le(),y=Te();He();const{success:U}=Ue(),{openAddFeedModal:K}=qe(),xe=Be("toggleSidebar");function J(){const r=y.query;return r.filter?{type:r.filter}:r.feed_id?{type:"feed",feedId:Number(r.feed_id)}:r.category_id?{type:"category",categoryId:Number(r.category_id)}:{type:"all"}}o.fetchArticles(J()),Y(()=>o.filterTitle,r=>De(r),{immediate:!0}),Y(()=>y.query,()=>{y.name==="articles.index"&&(T(),R.value=!1,o.fetchArticles(J()))},{deep:!0});const g=m(()=>y.query.feed_id?Number(y.query.feed_id):null),Q=m(()=>y.query.category_id?Number(y.query.category_id):null),D=m(()=>y.query.filter||null),ee=m(()=>{if(D.value==="read_later")return h.readLaterCount;if(D.value==="today")return h.todayCount;if(D.value==="recently_read")return 0;if(g.value){for(const e of h.categories){const s=e.feeds.find(k=>k.id===g.value);if(s)return s.unread_count||0}return h.uncategorizedFeeds.find(e=>e.id===g.value)?.unread_count||0}return Q.value?h.categories.find(e=>e.id===Q.value)?.unread_count||0:h.totalUnread}),z=m(()=>!!g.value),f=m(()=>{if(!g.value)return null;for(const r of h.categories){const e=r.feeds.find(s=>s.id===g.value);if(e)return e}return h.uncategorizedFeeds.find(r=>r.id===g.value)||null}),R=x(!1),te=m(()=>{let r=h.uncategorizedFeeds.length;for(const e of h.categories)r+=e.feeds?.length||0;return r}),L=m(()=>{const r={},e=new Date;e.setHours(0,0,0,0);const s=new Date(e);s.setDate(s.getDate()-1);for(const k of o.articles){const l=new Date(k.published_at);l.setHours(0,0,0,0);let v;l.getTime()===e.getTime()?v="Today":l.getTime()===s.getTime()?v="Yesterday":v=l.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),r[v]||(r[v]=[]),r[v].push(k)}return r});function re(r){const e=new Date,s=new Date(r),k=Math.floor((e-s)/1e3);if(k<60)return"just now";const l=Math.floor(k/60);if(l<60)return`${l}m`;const v=Math.floor(l/60);if(v<24)return`${v}h`;const ve=Math.floor(v/24);return ve<7?`${ve}d`:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}const S=x(typeof window<"u"&&window.innerWidth>=1024),b=x(null),i=x(null),F=x(!1),C=x(!1),fe=x(null),$=x(null);function ne(){S.value=window.innerWidth>=1024}let V=null;ze(()=>{window.addEventListener("resize",ne),window.addEventListener("keydown",ie),V=new IntersectionObserver(r=>{r[0].isIntersecting&&o.hasMore&&!o.loadingMore&&o.loadMore()},{rootMargin:"200px"}),$.value&&V.observe($.value)}),Re(()=>{window.removeEventListener("resize",ne),window.removeEventListener("keydown",ie),V?.disconnect()}),Y($,r=>{V?.disconnect(),r&&V?.observe(r)});function I(r){if(r.is_read||o.markRead(r.id),S.value){if(b.value===r.id){T();return}b.value=r.id,me(r.id)}else N.push({name:"articles.show",params:{id:r.id}})}async function me(r){const e=o.getContent(r);if(e){i.value=e,C.value=e.is_read_later||!1,F.value=!1,await W(),ae(r),o.prefetchAdjacent(r);return}F.value=!0;try{const s=await o.fetchContent(r);i.value=s,C.value=s.is_read_later||!1,await W(),ae(r),o.prefetchAdjacent(r)}catch{N.push({name:"articles.show",params:{id:r}})}finally{F.value=!1}}function ae(r){const e=document.getElementById(`article-expanded-${r}`);e&&e.scrollIntoView({block:"start",behavior:"smooth"})}function T(){i.value=null,b.value=null}function le(r){T(),N.push({name:"articles.index",query:{feed_id:r}})}function oe(){i.value&&(o.toggleReadLater(i.value.id),C.value=!C.value,U(C.value?"Article saved":"Removed from Read Later"))}function se(){i.value&&(o.markUnread(i.value.id),U("Marked as unread"))}const he=m(()=>i.value?.image_url?!(i.value.content||i.value.summary||"").includes(i.value.image_url):!1),ge=m(()=>i.value?new Date(i.value.published_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):""),be=m(()=>i.value?new Date(i.value.published_at).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):""),X=m(()=>b.value?o.articles.findIndex(r=>r.id===b.value):-1);function ie(r){if(S.value&&!(r.target.tagName==="INPUT"||r.target.tagName==="TEXTAREA"||r.target.isContentEditable)&&y.name==="articles.index")switch(r.key){case"ArrowRight":case"j":{r.preventDefault();const e=X.value+1;e<o.articles.length&&I(o.articles[e]);break}case"ArrowLeft":case"k":{r.preventDefault();const e=X.value-1;e>=0&&I(o.articles[e]);break}case"s":{r.preventDefault(),i.value&&oe();break}case"m":{if(r.preventDefault(),i.value){const e=X.value;se(),T();const s=o.articles[e+1];s&&(b.value=s.id,W(()=>{document.getElementById(`article-row-${s.id}`)?.scrollIntoView({block:"nearest",behavior:"smooth"})}))}break}case"Escape":{r.preventDefault(),T();break}}}const O=x(!1);function we(){O.value=!0,o.markAllRead(g.value),O.value=!1,U("All marked as read")}const H=x(!1);async function ue(){H.value=!0;try{if(g.value){const r=f.value?.disabled_at?`/api/feeds/${g.value}/reenable`:`/api/feeds/${g.value}/refresh`;await Ee.post(r)}await Promise.all([o.forceRefresh(),h.fetchSidebar()])}finally{H.value=!1}}const _=x(0),B=x(!1),M=x(!1);let de=0;function ye(r){window.scrollY>0||M.value||(de=r.touches[0].clientY,B.value=!0)}function _e(r){if(!B.value||M.value)return;if(window.scrollY>0){B.value=!1,_.value=0;return}const e=r.touches[0].clientY-de;e>0&&(_.value=Math.min(e*.5,120))}async function Me(){B.value&&(B.value=!1,_.value>=Z&&!M.value&&(M.value=!0,_.value=60,await ue(),M.value=!1),_.value=0)}const A=x({});function Ce(r,e){A.value[r]={startX:e.touches[0].clientX,startY:e.touches[0].clientY,currentX:0,swiping:!1,directionLocked:!1}}function Ae(r,e){const s=A.value[r];if(!s)return;const k=e.touches[0].clientX-s.startX,l=e.touches[0].clientY-s.startY;if(!s.directionLocked&&(Math.abs(k)>G||Math.abs(l)>G)&&(s.directionLocked=!0,Math.abs(l)>Math.abs(k))){delete A.value[r];return}s.directionLocked&&Math.abs(k)>G&&(s.swiping=!0,s.currentX=Math.max(Math.min(k,200),-200))}function Se(r,e){const s=A.value[r];s&&(s.currentX<-pe?e.is_read?o.markUnread(e.id):o.markRead(e.id):s.currentX>pe&&o.toggleReadLater(e.id),delete A.value[r])}function je(r){const e=A.value[r];return!e||!e.swiping?{}:{transform:`translateX(${e.currentX}px)`,transition:"none"}}function P(r){return A.value[r]?.swiping||!1}function ce(r){const e=A.value[r];return!e||!e.swiping?null:e.currentX>0?"right":"left"}return(r,e)=>(a(),n(c,null,[t("header",{class:w(S.value?"sticky top-0 z-30 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 pt-safe":"fixed top-0 inset-x-0 z-30 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 pt-safe")},[t("div",Oe,[t("div",Pe,[t("button",{onClick:e[0]||(e[0]=s=>d(xe)()),class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors -ml-2",title:"Open sidebar","aria-label":"Open sidebar"},[...e[10]||(e[10]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1)])]),t("h1",Ye,[ke(p(d(o).filterTitle)+" ",1),ee.value>0?(a(),n("span",We,p(ee.value),1)):u("",!0)])]),t("div",Ze,[t("button",{onClick:e[1]||(e[1]=s=>d(N).push({name:"articles.search"})),class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors cursor-pointer",title:"Search","aria-label":"Search articles"},[...e[11]||(e[11]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})],-1)])]),z.value?(a(),n("button",{key:0,onClick:e[2]||(e[2]=s=>R.value=!R.value),class:w(["rounded-lg p-2 transition-colors cursor-pointer",R.value?"text-blue-500 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30":"text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Feed info","aria-label":"Feed info"},[...e[12]||(e[12]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})],-1)])],2)):u("",!0),$e(t("button",{onClick:ue,disabled:H.value,class:w(["rounded-lg p-2 transition-colors cursor-pointer",f.value?.disabled_at?"text-amber-500 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30":"text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:f.value?.disabled_at?"Feed is broken — click to retry":"Refresh feed","aria-label":f.value?.disabled_at?"Retry broken feed":"Refresh feed"},[(a(),n("svg",{class:w(["h-5 w-5 transition-transform",{"animate-spin":H.value}]),fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182M2.985 19.644l3.181-3.182"},null,-1)])],2))],10,Ge),[[Ve,d(o).articles.length>0||!d(o).loading]]),d(o).unreadCount>0?(a(),n("button",{key:1,onClick:we,disabled:O.value,class:"rounded-lg p-2 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors cursor-pointer",title:"Mark all as read","aria-label":"Mark all as read"},[...e[14]||(e[14]=[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])],8,Ke)):u("",!0)])])],2),R.value&&f.value?(a(),n("div",{key:0,class:"border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50 px-4 py-3",style:E(S.value?"":"margin-top: calc(2.75rem + env(safe-area-inset-top, 0px))")},[t("div",Je,[f.value.favicon_url?(a(),n("img",{key:0,src:f.value.favicon_url,class:"h-8 w-8 shrink-0 rounded-md mt-0.5",alt:""},null,8,Qe)):u("",!0),t("div",et,[t("h2",tt,p(f.value.title),1),f.value.description?(a(),n("p",rt,p(f.value.description),1)):u("",!0),f.value.site_url?(a(),n("a",{key:1,href:f.value.site_url,target:"_blank",rel:"noopener noreferrer",class:"mt-1.5 inline-flex items-center gap-1 text-xs text-blue-500 dark:text-blue-400 hover:underline"},[e[15]||(e[15]=t("svg",{class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})],-1)),ke(" "+p(f.value.site_url.replace(/^https?:\/\//,"").replace(/\/$/,"")),1)],8,nt)):u("",!0)])])],4)):u("",!0),d(o).loading&&d(o).articles.length===0?(a(),n("div",{key:1,class:"flex items-center justify-center py-20",style:E(S.value?"":"margin-top: calc(2.75rem + env(safe-area-inset-top, 0px))")},[...e[16]||(e[16]=[t("svg",{class:"h-8 w-8 animate-spin text-neutral-400",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])],4)):S.value?(a(),n("div",at,[t("div",{ref_key:"articleListEl",ref:fe,class:"flex-1 flex flex-col overflow-y-auto pr-2"},[d(o).articles.length>0?(a(),n(c,{key:0},[(a(!0),n(c,null,q(L.value,(s,k)=>(a(),n(c,{key:k},[t("div",lt,[t("h2",ot,p(k),1)]),t("div",null,[(a(!0),n(c,null,q(s,l=>(a(),n(c,{key:l.id},[t("div",{id:`article-row-${l.id}`,class:w(["flex w-full items-center gap-3 border-b border-neutral-200/50 dark:border-neutral-800/50 px-4 py-2.5 text-left transition-colors",[b.value===l.id?"sticky top-0 z-10 bg-white/95 dark:bg-neutral-950/95 backdrop-blur border-b-neutral-200 dark:border-b-neutral-800":"group/row cursor-pointer hover:bg-neutral-50 dark:hover:bg-neutral-900/50"]]),onClick:v=>b.value!==l.id&&I(l)},[z.value?u("",!0):(a(),n(c,{key:0},[l.feed_favicon_url?(a(),n("img",{key:0,src:l.feed_favicon_url,class:"h-4 w-4 shrink-0 rounded-sm",alt:""},null,8,it)):u("",!0),t("span",{class:"w-32 shrink-0 truncate text-xs text-neutral-600 dark:text-neutral-500 hover:underline cursor-pointer",onClick:j(v=>le(l.feed_id),["stop"])},p(l.feed_title),9,ut)],64)),t("h3",{class:w(["min-w-0 flex-1 truncate text-sm",l.is_read?"text-neutral-600 dark:text-neutral-500 font-normal":"text-neutral-900 dark:text-neutral-100 font-medium"])},p(l.title),3),b.value!==l.id?(a(),n(c,{key:1},[t("span",dt,p(re(l.published_at)),1),t("span",{onClick:j(v=>d(o).dismissArticle(l.id),["stop"]),class:"w-6 shrink-0 flex items-center justify-center opacity-0 group-hover/row:opacity-100 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 transition-opacity cursor-pointer",title:"Dismiss — mark read & hide"},[...e[17]||(e[17]=[t("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,ct)],64)):(a(),n("div",vt,[t("button",{onClick:j(oe,["stop"]),class:w(["rounded-lg p-1.5 transition-colors cursor-pointer",C.value?"text-blue-500 hover:bg-neutral-200 dark:hover:bg-neutral-800":"text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-600 dark:hover:text-neutral-300"]),title:C.value?"Remove from Read Later":"Save to Read Later"},[(a(),n("svg",{class:"h-4 w-4",fill:C.value?"currentColor":"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[18]||(e[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"},null,-1)])],8,pt))],10,kt),t("button",{onClick:j(se,["stop"]),class:"rounded-lg p-1.5 text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors cursor-pointer",title:"Mark as unread"},[...e[19]||(e[19]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 9v.906a2.25 2.25 0 01-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 001.183 1.981l6.478 3.488m8.839 2.51l-4.66-2.51m0 0l-1.023-.55a2.25 2.25 0 00-2.134 0l-1.022.55m0 0l-4.661 2.51m16.5 1.615a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V8.844a2.25 2.25 0 011.183-1.98l7.5-4.04a2.25 2.25 0 012.134 0l7.5 4.04a2.25 2.25 0 011.183 1.98V18"})],-1)])]),i.value?.url?(a(),n("a",{key:0,href:i.value.url,target:"_blank",rel:"noopener noreferrer",onClick:e[3]||(e[3]=j(()=>{},["stop"])),class:"rounded-lg p-1.5 text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors",title:"Open original"},[...e[20]||(e[20]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})],-1)])],8,xt)):u("",!0),t("button",{onClick:j(T,["stop"]),class:"rounded-lg p-1.5 text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors cursor-pointer",title:"Collapse (Esc)"},[...e[21]||(e[21]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})],-1)])])]))],10,st),b.value===l.id?(a(),n("div",{key:0,id:`article-expanded-${l.id}`,class:"border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50"},[F.value&&!i.value?(a(),n("div",mt,[...e[22]||(e[22]=[t("svg",{class:"h-8 w-8 animate-spin text-neutral-400",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):u("",!0),i.value?(a(),n("article",ht,[t("div",gt,[i.value.author?(a(),n("span",bt,p(i.value.author),1)):u("",!0),i.value.author?(a(),n("span",wt,"·")):u("",!0),t("span",null,p(ge.value)+" at "+p(be.value),1)]),he.value?(a(),n("img",{key:0,src:i.value.image_url,alt:i.value.title,class:"mb-6 w-full max-h-80 object-cover rounded-lg",loading:"lazy"},null,8,yt)):u("",!0),t("div",{class:"article-content prose max-w-none dark:prose-invert prose-headings:text-neutral-800 dark:prose-headings:text-neutral-200 prose-p:text-neutral-700 dark:prose-p:text-neutral-300 prose-a:text-blue-500 prose-a:no-underline hover:prose-a:underline prose-strong:text-neutral-800 dark:prose-strong:text-neutral-200 prose-code:text-blue-600 dark:prose-code:text-blue-300 prose-pre:bg-white dark:prose-pre:bg-neutral-900 prose-pre:border prose-pre:border-neutral-200 dark:prose-pre:border-neutral-800 prose-img:rounded-lg prose-blockquote:border-neutral-300 dark:prose-blockquote:border-neutral-700 prose-blockquote:text-neutral-500 dark:prose-blockquote:text-neutral-400",innerHTML:i.value.content||i.value.summary},null,8,_t),!i.value.content&&!i.value.summary?(a(),n("div",Mt,[e[23]||(e[23]=t("p",{class:"text-neutral-500 dark:text-neutral-400"}," No article content available. ",-1)),i.value.url?(a(),n("a",{key:0,href:i.value.url,target:"_blank",rel:"noopener noreferrer",class:"mt-4 inline-block rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors"}," Read on original site ",8,Ct)):u("",!0)])):u("",!0),e[24]||(e[24]=Ne('<div class="mt-8 border-t border-neutral-200 dark:border-neutral-800 pt-4 text-xs text-neutral-400 dark:text-neutral-600" data-v-a908e9e3><span class="font-medium text-neutral-500" data-v-a908e9e3>Shortcuts:</span><span class="ml-2" data-v-a908e9e3><kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-a908e9e3>j</kbd>/<kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-a908e9e3>k</kbd> or <kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-a908e9e3>←</kbd>/<kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-a908e9e3>→</kbd> navigate</span><span class="ml-2" data-v-a908e9e3><kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-a908e9e3>s</kbd> save</span><span class="ml-2" data-v-a908e9e3><kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-a908e9e3>m</kbd> mark unread</span><span class="ml-2" data-v-a908e9e3><kbd class="rounded bg-neutral-200 dark:bg-neutral-800 px-1.5 py-0.5" data-v-a908e9e3>Esc</kbd> close</span></div>',1))])):u("",!0)],8,ft)):u("",!0)],64))),128))])],64))),128)),t("div",{ref_key:"loadMoreSentinel",ref:$,class:"h-px"},null,512),d(o).loadingMore?(a(),n("div",At,[...e[25]||(e[25]=[t("svg",{class:"h-6 w-6 animate-spin text-neutral-400",viewBox:"0 0 24 24",fill:"none"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)])])):u("",!0),!d(o).hasMore&&d(o).loaded&&L.value&&Object.keys(L.value).length>0?(a(),n("div",St," No more articles ")):u("",!0)],64)):(a(),n("div",jt,[D.value==="read_later"?(a(),n(c,{key:0},[e[26]||(e[26]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[27]||(e[27]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No saved articles ",-1)),e[28]||(e[28]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Save articles from your feeds to read later. ",-1))],64)):te.value===0?(a(),n(c,{key:1},[e[29]||(e[29]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[30]||(e[30]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No articles yet ",-1)),e[31]||(e[31]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Subscribe to feeds to start seeing articles here. ",-1)),t("button",{type:"button",onClick:e[4]||(e[4]=s=>d(K)()),class:"mt-4 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors cursor-pointer"}," Add a Feed ")],64)):z.value?(a(),n(c,{key:2},[e[32]||(e[32]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[33]||(e[33]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," All caught up ",-1)),e[34]||(e[34]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," No unread articles in this feed. ",-1)),t("button",{type:"button",onClick:e[5]||(e[5]=s=>d(o).showAllArticles()),class:"mt-4 rounded-lg bg-neutral-200 dark:bg-neutral-800 px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-700 transition-colors cursor-pointer"}," Show all articles ")],64)):(a(),n(c,{key:3},[e[35]||(e[35]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[36]||(e[36]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," All caught up ",-1)),e[37]||(e[37]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," No unread articles. ",-1)),t("button",{type:"button",onClick:e[6]||(e[6]=s=>d(o).showAllArticles()),class:"mt-4 rounded-lg bg-neutral-200 dark:bg-neutral-800 px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-700 transition-colors cursor-pointer"}," Show all articles ")],64))]))],512)])):(a(),n(c,{key:3},[e[55]||(e[55]=t("div",{style:{height:"calc(2.75rem + env(safe-area-inset-top, 0px))"}},null,-1)),t("div",{class:w(["flex items-center justify-center overflow-hidden transition-all duration-200",{"transition-none":B.value}]),style:E({height:_.value+"px"})},[t("div",Lt,[(a(),n("svg",{class:w(["h-5 w-5 text-neutral-500 dark:text-neutral-400 transition-transform duration-200",{"animate-spin":M.value}]),style:E(M.value?{}:{transform:`rotate(${Math.min(_.value/Z,1)*360}deg)`}),fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[...e[38]||(e[38]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182M2.985 19.644l3.181-3.182"},null,-1)])],6)),!M.value&&_.value>=Z?(a(),n("span",Tt,"Release to refresh")):M.value?(a(),n("span",Bt,"Refreshing...")):u("",!0)])],6),t("div",{onTouchstartPassive:ye,onTouchmovePassive:_e,onTouchend:Me},[d(o).articles.length===0&&!d(o).loading?(a(),n("div",Dt,[D.value==="read_later"?(a(),n(c,{key:0},[e[39]||(e[39]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[40]||(e[40]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No saved articles ",-1)),e[41]||(e[41]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Save articles from your feeds to read later. ",-1))],64)):te.value===0?(a(),n(c,{key:1},[e[42]||(e[42]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[43]||(e[43]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," No articles yet ",-1)),e[44]||(e[44]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," Subscribe to feeds to start seeing articles here. ",-1)),t("button",{type:"button",onClick:e[7]||(e[7]=s=>d(K)()),class:"mt-4 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 transition-colors cursor-pointer"}," Add a Feed ")],64)):z.value?(a(),n(c,{key:2},[e[45]||(e[45]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[46]||(e[46]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," All caught up ",-1)),e[47]||(e[47]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," No unread articles in this feed. ",-1)),t("button",{type:"button",onClick:e[8]||(e[8]=s=>d(o).showAllArticles()),class:"mt-4 rounded-lg bg-neutral-200 dark:bg-neutral-800 px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-700 transition-colors cursor-pointer"}," Show all articles ")],64)):(a(),n(c,{key:3},[e[48]||(e[48]=t("svg",{class:"h-16 w-16 text-neutral-300 dark:text-neutral-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[49]||(e[49]=t("h3",{class:"mt-4 text-lg font-medium text-neutral-700 dark:text-neutral-300"}," All caught up ",-1)),e[50]||(e[50]=t("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-500"}," No unread articles. ",-1)),t("button",{type:"button",onClick:e[9]||(e[9]=s=>d(o).showAllArticles()),class:"mt-4 rounded-lg bg-neutral-200 dark:bg-neutral-800 px-4 py-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-700 transition-colors cursor-pointer"}," Show all articles ")],64))])):d(o).articles.length>0?(a(),n("div",zt,[(a(!0),n(c,null,q(L.value,(s,k)=>(a(),n(c,{key:k},[t("div",Rt,[t("h2",$t,p(k),1)]),t("div",null,[(a(!0),n(c,null,q(s,l=>(a(),n("div",{key:l.id,class:"relative overflow-hidden border-b border-neutral-200/50 dark:border-neutral-800/50 bg-neutral-200 dark:bg-neutral-800"},[P(l.id)&&ce(l.id)==="right"?(a(),n("div",Vt,[e[51]||(e[51]=t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1)),t("span",Et,p(l.is_read_later?"Saved":"Read Later"),1)])):u("",!0),P(l.id)&&ce(l.id)==="left"?(a(),n("div",Nt,[e[52]||(e[52]=t("svg",{class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1)),t("span",Ft,p(l.is_read?"Mark as Unread":"Mark as Read"),1)])):u("",!0),t("button",{onClick:v=>!P(l.id)&&I(l),onTouchstart:v=>Ce(l.id,v),onTouchmove:v=>Ae(l.id,v),onTouchend:v=>Se(l.id,l),class:"relative flex w-full gap-3 bg-white dark:bg-neutral-950 px-4 py-3 text-left transition-colors hover:bg-neutral-50 dark:hover:bg-neutral-900/50 active:bg-neutral-100 dark:active:bg-neutral-800/50",style:E(je(l.id))},[t("div",Ht,[t("h3",{class:w(["text-sm leading-snug",l.is_read?"text-neutral-600 dark:text-neutral-500 font-normal":"text-neutral-900 dark:text-neutral-100 font-semibold"])},p(l.title),3),t("div",qt,[z.value?u("",!0):(a(),n(c,{key:0},[l.feed_favicon_url?(a(),n("img",{key:0,src:l.feed_favicon_url,class:"h-3.5 w-3.5 rounded-sm",alt:""},null,8,Ut)):u("",!0),t("span",{class:"truncate hover:underline",onClick:j(v=>le(l.feed_id),["stop"])},p(l.feed_title),9,Xt),e[53]||(e[53]=t("span",null,"·",-1))],64)),t("span",Ot,p(re(l.published_at)),1)])]),l.image_url?(a(),n("img",{key:0,src:l.image_url,class:"h-16 w-16 shrink-0 rounded-lg object-cover",alt:l.title,loading:"lazy"},null,8,Pt)):u("",!0)],44,It)]))),128))])],64))),128)),t("div",{ref_key:"loadMoreSentinel",ref:$,class:"h-px"},null,512),d(o).loadingMore?(a(),n("div",Yt,[...e[54]||(e[54]=[t("svg",{class:"h-6 w-6 animate-spin text-neutral-400",viewBox:"0 0 24 24",fill:"none"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)])])):u("",!0),!d(o).hasMore&&d(o).loaded&&L.value&&Object.keys(L.value).length>0?(a(),n("div",Wt," No more articles ")):u("",!0)])):u("",!0)],32)],64))],64))}}),nr=Xe(Zt,[["__scopeId","data-v-a908e9e3"]]);export{nr as default};
