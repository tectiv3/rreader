import{j,m as $,h,i as D,g as k,o as u,c,F as y,r as z,n as b,d as e,t as Y,u as i,J as B,K as q,C as x,e as H,b as Q,f as J,a as P,H as W}from"./app-lzlsEPfp.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _=h(typeof navigator<"u"?navigator.onLine:!0),F=h(_.value?new Date:null);let w=0;function V(){_.value=!0,F.value=new Date}function E(){_.value=!1}function N(){return j(()=>{w===0&&(window.addEventListener("online",V),window.addEventListener("offline",E)),w++}),$(()=>{w--,w===0&&(window.removeEventListener("online",V),window.removeEventListener("offline",E))}),{isOnline:_,lastOnlineAt:F}}const R="rreader-offline-queue",g=h(K());let A=!1;function K(){try{const a=localStorage.getItem(R);return a?JSON.parse(a):[]}catch{return[]}}function I(){try{localStorage.setItem(R,JSON.stringify(g.value))}catch{}}function G(a,t,r={}){g.value.push({method:a,url:t,data:r,queuedAt:new Date().toISOString()}),I()}function L(){if(A||g.value.length===0)return;A=!0;const a=[...g.value];g.value=[],I();let t=Promise.resolve();for(const r of a)t=t.then(()=>new Promise(p=>{k[r.method](r.url,r.data,{preserveScroll:!0,preserveState:!0,onFinish:()=>p(),onError:()=>p()})}));t.finally(()=>{A=!1,g.value.length>0&&L()})}function U(){const{isOnline:a}=N();return D(a,t=>{t&&L()}),a.value&&g.value.length>0&&setTimeout(L,100),{queue:g,enqueue:G,flushQueue:L}}const m=h([]);let X=0;function Z(){function a(n,o="info",v=3e3){const f=X++;return m.value.push({id:f,message:n,type:o,leaving:!1}),v>0&&setTimeout(()=>t(f),v),f}function t(n){const o=m.value.find(v=>v.id===n);o&&(o.leaving=!0,setTimeout(()=>{m.value=m.value.filter(v=>v.id!==n)},300))}function r(n,o=3e3){return a(n,"success",o)}function p(n,o=4e3){return a(n,"error",o)}function l(n,o=3e3){return a(n,"info",o)}return{toasts:m,show:a,dismiss:t,success:r,error:p,info:l}}const ee={class:"fixed bottom-20 lg:bottom-6 inset-x-0 z-50 flex flex-col items-center gap-2 pointer-events-none px-4"},te={key:0,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},re={key:1,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},ne={key:2,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},se=["onClick"],ae={__name:"ToastContainer",setup(a){const{toasts:t,dismiss:r}=Z();return(p,l)=>(u(),c("div",ee,[(u(!0),c(y,null,z(i(t),n=>(u(),c("div",{key:n.id,class:b(["pointer-events-auto flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium shadow-lg transition-all duration-300",[n.type==="success"?"bg-green-600 text-white":n.type==="error"?"bg-red-600 text-white":"bg-neutral-300 dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100",n.leaving?"opacity-0 translate-y-2":"opacity-100 translate-y-0"]]),role:"status","aria-live":"polite"},[n.type==="success"?(u(),c("svg",te,[...l[0]||(l[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1)])])):n.type==="error"?(u(),c("svg",re,[...l[1]||(l[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"},null,-1)])])):(u(),c("svg",ne,[...l[2]||(l[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},null,-1)])])),e("span",null,Y(n.message),1),e("button",{onClick:o=>i(r)(n.id),class:"ml-1 shrink-0 rounded p-0.5 opacity-70 hover:opacity-100 transition-opacity","aria-label":"Dismiss"},[...l[3]||(l[3]=[e("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,se)],2))),128))]))}},le={},oe={class:"lg:hidden"},ie={class:"hidden lg:block"};function de(a,t){return u(),c(y,null,[e("div",oe,[t[1]||(t[1]=e("div",{class:"border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2"},[e("div",{class:"h-3 w-16 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"})],-1)),(u(),c(y,null,z(6,r=>e("div",{key:r,class:"flex gap-3 border-b border-neutral-200/50 dark:border-neutral-800/50 px-4 py-3"},[t[0]||(t[0]=B('<div class="min-w-0 flex-1"><div class="flex items-center gap-2"><div class="h-3.5 w-3.5 animate-pulse rounded-sm bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3 w-20 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3 w-8 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div></div><div class="mt-2 h-4 w-full animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="mt-1.5 h-4 w-3/4 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="mt-1.5 h-3 w-full animate-pulse rounded bg-neutral-200/60 dark:bg-neutral-800/60"></div></div>',1)),e("div",{class:b(["h-16 w-16 shrink-0 animate-pulse rounded-lg bg-neutral-200 dark:bg-neutral-800",{hidden:r%3===0}])},null,2)])),64))]),e("div",ie,[t[3]||(t[3]=e("div",{class:"border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-950/95 px-4 py-2"},[e("div",{class:"h-3 w-16 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"})],-1)),(u(),c(y,null,z(10,r=>e("div",{key:"d"+r,class:"flex items-center gap-3 border-b border-neutral-200/50 dark:border-neutral-800/50 px-4 py-2.5"},[...t[2]||(t[2]=[B('<div class="h-4 w-4 shrink-0 animate-pulse rounded-sm bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3 w-28 shrink-0 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="h-3.5 flex-1 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div><div class="hidden xl:block h-3 w-48 shrink-0 animate-pulse rounded bg-neutral-200/60 dark:bg-neutral-800/60"></div><div class="h-3 w-10 shrink-0 animate-pulse rounded bg-neutral-200 dark:bg-neutral-800"></div>',5)])])),64))])],64)}const ue=T(le,[["render",de]]),ce={class:"min-h-screen bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100"},ve={class:"sticky top-0 z-40 border-b border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 pt-safe"},pe={class:"flex h-14 items-center justify-between px-4"},fe={class:"flex items-center gap-3"},ge={class:"text-lg font-semibold text-neutral-900 dark:text-neutral-100"},ke={class:"flex items-center gap-2"},be={key:0,class:"sticky top-14 z-30 flex items-center justify-center gap-2 bg-amber-600 px-4 py-1.5 text-xs font-medium text-white"},he={class:"pb-16 lg:pb-0"},me={key:1,class:"page-enter"},xe={class:"flex h-14 items-center justify-around px-2"},M=10,we={__name:"AppLayout",setup(a){const{isOnline:t}=N();U();const r=W(),p=q("toggleSidebar",null),l=h(!1);let n=null,o=null;j(()=>{n=k.on("start",()=>{l.value=!0}),o=k.on("finish",()=>{l.value=!1})}),$(()=>{n?.(),o?.()});function v(d){k.get(route("articles.index",d),{},{preserveState:!1})}const f=h(!1);let C=0;function O(){const d=window.scrollY;d<M?f.value=!1:d>C+M?f.value=!0:d<C-M&&(f.value=!1),C=d}return j(()=>{window.addEventListener("scroll",O,{passive:!0})}),$(()=>{window.removeEventListener("scroll",O)}),(d,s)=>(u(),c("div",ce,[e("header",ve,[e("div",pe,[e("div",fe,[x(d.$slots,"header-left",{},void 0,!0),e("h1",ge,[x(d.$slots,"title",{},()=>[s[4]||(s[4]=H("RReader",-1))],!0)])]),e("div",ke,[x(d.$slots,"header-right",{},void 0,!0)])])]),i(t)?Q("",!0):(u(),c("div",be,[...s[5]||(s[5]=[e("svg",{class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})],-1),H(" You're offline â€” viewing cached content ",-1)])])),e("main",he,[l.value?(u(),J(ue,{key:0})):(u(),c("div",me,[x(d.$slots,"default",{},void 0,!0)]))]),P(ae),e("nav",{class:b(["fixed bottom-0 inset-x-0 z-40 border-t border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 lg:hidden pb-safe transition-transform duration-300",f.value?"translate-y-full":"translate-y-0"]),"aria-label":"Bottom navigation"},[e("div",xe,[e("button",{onClick:s[0]||(s[0]=S=>i(p)?i(p)():i(k).visit(d.route("articles.index"))),class:"flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors",title:"Open sidebar","aria-label":"Open sidebar"},[...s[6]||(s[6]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1),e("span",{class:"text-[10px]"},"Menu",-1)])]),e("button",{onClick:s[1]||(s[1]=S=>v({filter:"read_later"})),class:b(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",i(r).props.activeFilter==="read_later"?"text-amber-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Read Later","aria-label":"Read Later"},[...s[7]||(s[7]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1),e("span",{class:"text-[10px]"},"Read Later",-1)])],2),e("button",{onClick:s[2]||(s[2]=S=>v({})),class:b(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",!i(r).props.activeFilter&&!i(r).props.activeFeedId&&!i(r).props.activeCategoryId&&i(r).url.startsWith("/articles")&&!i(r).url.startsWith("/articles/search")?"text-blue-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"All feeds","aria-label":"All feeds"},[...s[8]||(s[8]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})],-1),e("span",{class:"text-[10px]"},"Feeds",-1)])],2),e("button",{onClick:s[3]||(s[3]=S=>i(k).visit(d.route("feeds.create"))),class:b(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",i(r).url.startsWith("/feeds/create")?"text-blue-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Add feed","aria-label":"Add feed"},[...s[9]||(s[9]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3"})],-1),e("span",{class:"text-[10px]"},"Add",-1)])],2)])],2)]))}},_e=T(we,[["__scopeId","data-v-2782dd9b"]]);export{_e as A,U as a,Z as b,N as u};
