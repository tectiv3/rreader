import{A as S,i as A,f as $,w as g,a as h,u as i,q as D,d as t,s as q,n as f,o as r,c as s,t as c,b as p,e as d,F as y,r as _,x as C,h as P,g as H}from"./app-v9FSufzb.js";import{A as T}from"./AppLayout-BW811Osc.js";import{_ as U}from"./InputError-C_PcoR_e.js";import{P as j}from"./PrimaryButton-BlsFJl42.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"mx-auto max-w-lg px-4 py-6 space-y-5"},J={class:"rounded-xl bg-neutral-50 dark:bg-neutral-900 p-5"},K={key:0},Q={key:1},R={key:0,class:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none"},W={key:0,class:"rounded-xl bg-neutral-50 dark:bg-neutral-900 p-5"},X={class:"flex items-center justify-between mb-4"},Y={class:"text-base font-medium text-neutral-800 dark:text-neutral-200"},Z={class:"text-sm font-normal text-neutral-500 dark:text-neutral-400"},ee={key:0},te={class:"flex items-center gap-2 mb-3 pb-3 border-b border-neutral-200 dark:border-neutral-800"},re=["checked"],le={class:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2 flex items-center gap-1.5"},se={class:"space-y-1 pl-1"},ae=["onClick"],oe=["checked","disabled"],ne=["src"],ie={key:1,class:"text-xs text-neutral-600 dark:text-neutral-500 shrink-0"},ue={key:0,class:"mb-4"},de={class:"space-y-1 pl-1"},ce=["onClick"],pe=["checked","disabled"],me=["src"],fe={key:1,class:"text-xs text-neutral-600 dark:text-neutral-500 shrink-0"},xe={key:0,class:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none"},we={__name:"Import",props:{preview:{type:Object,default:null},totalFeeds:{type:Number,default:0},duplicateCount:{type:Number,default:0}},setup(m){const b=m,o=S({file:null}),x=P(!1),u=P([]),k=C(()=>{if(!b.preview)return[];const n=[];for(const e of b.preview.categories)for(const l of e.feeds)l.is_duplicate||n.push(l.feed_url);for(const e of b.preview.uncategorized)e.is_duplicate||n.push(e.feed_url);return n});A(()=>b.preview,()=>{u.value=[...k.value]},{immediate:!0});const v=C(()=>u.value.length),F=C(()=>k.value.length>0&&u.value.length===k.value.length),V=()=>{F.value?u.value=[]:u.value=[...k.value]},M=n=>{if(!k.value.includes(n))return;const e=u.value.indexOf(n);e>-1?u.value.splice(e,1):u.value.push(n)},B=n=>u.value.includes(n),I=n=>{const e=n.target.files[0];e&&(o.file=e)},L=()=>{o.file&&o.post(route("opml.preview"),{forceFormData:!0,preserveScroll:!0})},N=()=>{v.value!==0&&(x.value=!0,H.post(route("opml.import"),{selected_feeds:u.value},{onFinish:()=>{x.value=!1}}))},O=()=>{window.location.href=route("opml.export")};return(n,e)=>(r(),$(T,null,{title:g(()=>[...e[2]||(e[2]=[d("Import / Export",-1)])]),default:g(()=>[h(i(D),{title:"Import / Export"}),t("div",G,[t("div",J,[e[5]||(e[5]=t("h2",{class:"text-base font-medium text-neutral-800 dark:text-neutral-200 mb-1"},"Import OPML",-1)),e[6]||(e[6]=t("p",{class:"text-sm text-neutral-500 dark:text-neutral-400 mb-4"}," Upload an .opml or .xml file to import feeds from another reader. ",-1)),t("form",{onSubmit:q(L,["prevent"])},[t("div",null,[t("label",{class:f(["flex cursor-pointer items-center justify-center gap-2 rounded-lg border-2 border-dashed border-neutral-300 bg-white px-4 py-6 text-sm text-neutral-500 dark:text-neutral-400 transition hover:border-neutral-400 hover:text-neutral-700 dark:border-neutral-700 dark:bg-neutral-800 dark:hover:border-neutral-600 dark:hover:text-neutral-300",{"border-blue-500 text-blue-400":i(o).file}])},[e[3]||(e[3]=t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),i(o).file?(r(),s("span",K,c(i(o).file.name),1)):(r(),s("span",Q,"Choose .opml or .xml file")),t("input",{type:"file",accept:".opml,.xml",class:"hidden",onChange:I},null,32)],2),h(U,{class:"mt-2",message:i(o).errors.file},null,8,["message"])]),h(j,{class:f(["mt-4 w-full",{"opacity-25":i(o).processing||!i(o).file}]),disabled:i(o).processing||!i(o).file},{default:g(()=>[i(o).processing?(r(),s("svg",R,[...e[4]||(e[4]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):p("",!0),d(" "+c(i(o).processing?"Parsing...":"Upload & Preview"),1)]),_:1},8,["class","disabled"])],32)]),m.preview?(r(),s("div",W,[t("div",X,[t("h2",Y,[e[8]||(e[8]=d(" Preview ",-1)),t("span",Z,[d(" ("+c(m.totalFeeds)+" feeds found",1),m.duplicateCount?(r(),s("span",ee,", "+c(m.duplicateCount)+" already subscribed",1)):p("",!0),e[7]||(e[7]=d(") ",-1))])])]),t("div",te,[t("div",{class:"flex items-center gap-2 text-sm text-neutral-700 dark:text-neutral-300 cursor-pointer",onClick:V},[t("input",{type:"checkbox",checked:F.value,class:"rounded border-neutral-300 bg-white text-blue-500 focus:ring-blue-500 focus:ring-offset-white dark:border-neutral-600 dark:bg-neutral-800 dark:focus:ring-offset-neutral-900 pointer-events-none"},null,8,re),d(" Select all new feeds ("+c(k.value.length)+") ",1)])]),(r(!0),s(y,null,_(m.preview.categories,(l,w)=>(r(),s("div",{key:w,class:"mb-4"},[t("h3",le,[e[9]||(e[9]=t("svg",{class:"h-4 w-4 text-neutral-600 dark:text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),d(" "+c(l.name),1)]),t("div",se,[(r(!0),s(y,null,_(l.feeds,(a,E)=>(r(),s("div",{key:E,class:f(["flex items-center gap-2.5 rounded-lg px-3 py-2 text-sm transition",a.is_duplicate?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-neutral-200 dark:hover:bg-neutral-800"]),onClick:z=>!a.is_duplicate&&M(a.feed_url)},[t("input",{type:"checkbox",checked:a.is_duplicate?!1:B(a.feed_url),disabled:a.is_duplicate,class:"rounded border-neutral-300 bg-white text-blue-500 focus:ring-blue-500 focus:ring-offset-white dark:border-neutral-600 dark:bg-neutral-800 dark:focus:ring-offset-neutral-900 disabled:opacity-40 pointer-events-none"},null,8,oe),a.favicon_url?(r(),s("img",{key:0,src:a.favicon_url,class:"h-4 w-4 rounded",onError:e[0]||(e[0]=z=>z.target.style.display="none")},null,40,ne)):p("",!0),t("span",{class:f(["flex-1 truncate",a.is_duplicate?"text-neutral-500 line-through":"text-neutral-800 dark:text-neutral-200"])},c(a.title),3),a.is_duplicate?(r(),s("span",ie,"subscribed")):p("",!0)],10,ae))),128))])]))),128)),m.preview.uncategorized.length>0?(r(),s("div",ue,[e[10]||(e[10]=t("h3",{class:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2 flex items-center gap-1.5"},[t("svg",{class:"h-4 w-4 text-neutral-600 dark:text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 5c7.18 0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 110-2 1 1 0 010 2z"})]),d(" Uncategorized ")],-1)),t("div",de,[(r(!0),s(y,null,_(m.preview.uncategorized,(l,w)=>(r(),s("div",{key:w,class:f(["flex items-center gap-2.5 rounded-lg px-3 py-2 text-sm transition",l.is_duplicate?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-neutral-200 dark:hover:bg-neutral-800"]),onClick:a=>!l.is_duplicate&&M(l.feed_url)},[t("input",{type:"checkbox",checked:l.is_duplicate?!1:B(l.feed_url),disabled:l.is_duplicate,class:"rounded border-neutral-300 bg-white text-blue-500 focus:ring-blue-500 focus:ring-offset-white dark:border-neutral-600 dark:bg-neutral-800 dark:focus:ring-offset-neutral-900 disabled:opacity-40 pointer-events-none"},null,8,pe),l.favicon_url?(r(),s("img",{key:0,src:l.favicon_url,class:"h-4 w-4 rounded",onError:e[1]||(e[1]=a=>a.target.style.display="none")},null,40,me)):p("",!0),t("span",{class:f(["flex-1 truncate",l.is_duplicate?"text-neutral-500 line-through":"text-neutral-800 dark:text-neutral-200"])},c(l.title),3),l.is_duplicate?(r(),s("span",fe,"subscribed")):p("",!0)],10,ce))),128))])])):p("",!0),h(j,{class:f(["mt-2 w-full",{"opacity-25":x.value||v.value===0}]),disabled:x.value||v.value===0,onClick:N},{default:g(()=>[x.value?(r(),s("svg",xe,[...e[11]||(e[11]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):p("",!0),d(" "+c(x.value?"Importing...":`Import ${v.value} Feed${v.value!==1?"s":""}`),1)]),_:1},8,["class","disabled"])])):p("",!0),t("div",{class:"rounded-xl bg-neutral-50 dark:bg-neutral-900 p-5"},[e[13]||(e[13]=t("h2",{class:"text-base font-medium text-neutral-800 dark:text-neutral-200 mb-1"},"Export OPML",-1)),e[14]||(e[14]=t("p",{class:"text-sm text-neutral-500 dark:text-neutral-400 mb-4"}," Download your subscriptions as an OPML file for backup or migration. ",-1)),t("button",{onClick:O,class:"flex w-full items-center justify-center gap-2 rounded-lg bg-neutral-200 dark:bg-neutral-800 px-4 py-3 text-sm font-medium text-neutral-800 dark:text-neutral-200 transition hover:bg-neutral-300 dark:hover:bg-neutral-700"},[...e[12]||(e[12]=[t("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),d(" Download OPML File ",-1)])])])])]),_:1}))}};export{we as default};
