import{u as Z,a as ee,b as de}from"./useAddFeedModal-CYkLcW3u.js";import{w as te,r as ce,a as C,n as J,o as re,b as le,c as l,d as q,e as g,f as I,g as n,h as e,T as D,i as G,j as _,k as m,l as T,t as h,m as ve,F as O,p as E,v as fe,q as xe,s as W,u as A,x as ne,y as pe,z as ke,A as be,K as ge,B as me,C as U}from"./app-CNjV5YtX.js";import{_ as Y,a as N,b as X}from"./TextInput-Dhm-DQ1J.js";import{u as P}from"./useSidebarStore-CPmM2X6z.js";import{u as he}from"./useToast-rkUx_UMM.js";import{u as oe}from"./useArticleStore-CYHdVFbe.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const se="rreader-offline-queue",L=C(ye());let K=!1;function ye(){try{const o=localStorage.getItem(se);return o?JSON.parse(o):[]}catch{return[]}}function ie(){try{localStorage.setItem(se,JSON.stringify(L.value))}catch{}}function we(o,x,c={}){L.value.push({method:o,url:x,data:c,queuedAt:new Date().toISOString()}),ie()}function H(){if(K||L.value.length===0)return;K=!0;const o=[...L.value];L.value=[],ie();let x=Promise.resolve();for(const c of o)x=x.then(()=>new Promise(p=>{ce[c.method](c.url,c.data,{preserveScroll:!0,preserveState:!0,onFinish:()=>p(),onError:()=>p()})}));x.finally(()=>{K=!1,L.value.length>0&&H()})}function Ce(){const{isOnline:o}=Z();return te(o,x=>{x&&H()}),o.value&&L.value.length>0&&setTimeout(H,100),{queue:L,enqueue:we,flushQueue:H}}const _e={key:0,class:"fixed inset-0 z-50 flex items-start justify-center pt-[12vh] lg:items-center lg:pt-0"},$e={key:0,class:"relative z-10 w-full max-h-[80vh] overflow-y-auto rounded-2xl bg-neutral-50 dark:bg-neutral-900 shadow-2xl max-w-md mx-4"},Me={class:"p-5"},Se={key:0},je=["disabled"],Fe={key:0,class:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none"},ze={key:1},Ae={class:"flex items-start gap-3 mb-5 rounded-lg bg-neutral-100 dark:bg-neutral-800 p-3"},Be=["src"],Le={key:1,class:"mt-0.5 h-6 w-6 rounded bg-neutral-300 dark:bg-neutral-700 shrink-0"},Ve={class:"min-w-0 flex-1"},Oe={class:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate"},Te={key:0,class:"mt-0.5 text-xs text-neutral-500 dark:text-neutral-400 line-clamp-2"},Ee={class:"mt-0.5 text-xs text-neutral-600 dark:text-neutral-500"},Ie={class:"mb-4"},Re={class:"mb-4"},Ue={key:0},Ne=["value"],He={key:1},qe=["disabled"],De={key:0,class:"mr-2 h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none"},Ye={__name:"AddFeedModal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(o,{emit:x}){const c=o,p=x,u=C(""),i=C(""),d=C(!1),f=C(null),V=C([]),F=C(""),y=C(""),z=C(""),j=C(""),M=C(!1),$=C(!1),w=C({}),S=C(null);te(()=>c.show,k=>{k?(document.body.style.overflow="hidden",J(()=>{S.value?.focus()})):(document.body.style.overflow="",r())});function v(k){k.key==="Escape"&&c.show&&(k.preventDefault(),t())}re(()=>document.addEventListener("keydown",v)),le(()=>{document.removeEventListener("keydown",v),document.body.style.overflow=""});function r(){u.value="",i.value="",d.value=!1,f.value=null,V.value=[],F.value="",y.value="",z.value="",j.value="",M.value=!1,$.value=!1,w.value={}}function t(){p("close")}async function a(){if(u.value.trim()){i.value="",d.value=!0;try{const k=await W.post("/api/feeds/preview",{url:u.value});f.value=k.data.preview,V.value=k.data.categories,F.value=k.data.preview.feed_url,y.value=""}catch(k){k.response?.status===422&&k.response.data?.errors?.url?i.value=k.response.data.errors.url[0]:i.value="Something went wrong. Please try again."}finally{d.value=!1}}}function R(){M.value=!M.value,M.value?z.value="":j.value=""}async function B(){$.value=!0,w.value={};try{await W.post("/api/feeds",{feed_url:F.value,title:y.value||f.value?.title||"",category_id:z.value||"",new_category:j.value||""}),P().fetchSidebar(),t()}catch(k){k.response?.status===422&&k.response.data?.errors&&(w.value=Object.fromEntries(Object.entries(k.response.data.errors).map(([s,b])=>[s,Array.isArray(b)?b[0]:b])))}finally{$.value=!1}}function ue(){f.value=null,w.value={},J(()=>{S.value?.focus()})}return(k,s)=>(l(),q(xe,{to:"body"},[g(D,{"enter-active-class":"duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:I(()=>[o.show?(l(),n("div",_e,[e("div",{class:"absolute inset-0 bg-black/60",onClick:t}),g(D,{"enter-active-class":"duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95",appear:""},{default:I(()=>[o.show?(l(),n("div",$e,[e("div",{class:"sticky top-0 z-10 flex items-center justify-between border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900 px-5 py-4 rounded-t-2xl"},[s[6]||(s[6]=e("h2",{class:"text-base font-semibold text-neutral-900 dark:text-neutral-100"}," Add Feed ",-1)),e("button",{onClick:t,class:"rounded-lg p-1.5 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors","aria-label":"Close"},[...s[5]||(s[5]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Me,[f.value?(l(),n("div",ze,[e("button",{onClick:ue,class:"mb-4 flex items-center gap-1 text-sm text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors"},[...s[9]||(s[9]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1),T(" Search again ",-1)])]),e("div",Ae,[f.value.favicon_url?(l(),n("img",{key:0,src:f.value.favicon_url,class:"mt-0.5 h-6 w-6 rounded",onError:s[1]||(s[1]=b=>b.target.style.display="none")},null,40,Be)):(l(),n("div",Le)),e("div",Ve,[e("h3",Oe,h(f.value.title||"Untitled Feed"),1),f.value.description?(l(),n("p",Te,h(f.value.description),1)):m("",!0),e("p",Ee,h(f.value.article_count)+" articles found ",1)])]),e("form",{onSubmit:G(B,["prevent"])},[e("div",Ie,[g(X,{for:"add-feed-title",value:"Title (optional)"}),g(Y,{id:"add-feed-title",type:"text",class:"mt-1 block w-full text-base",modelValue:y.value,"onUpdate:modelValue":s[2]||(s[2]=b=>y.value=b),placeholder:f.value.title||"Feed title"},null,8,["modelValue","placeholder"])]),e("div",Re,[g(X,{for:"add-feed-category",value:"Category (optional)"}),M.value?(l(),n("div",He,[g(Y,{id:"add-feed-new-category",type:"text",class:"mt-1 block w-full text-base",modelValue:j.value,"onUpdate:modelValue":s[4]||(s[4]=b=>j.value=b),placeholder:"New category name"},null,8,["modelValue"])])):(l(),n("div",Ue,[ve(e("select",{id:"add-feed-category","onUpdate:modelValue":s[3]||(s[3]=b=>z.value=b),class:"mt-1 block w-full rounded-lg border-neutral-300 bg-white text-base text-neutral-800 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-100"},[s[10]||(s[10]=e("option",{value:""},"No category",-1)),(l(!0),n(O,null,E(V.value,b=>(l(),n("option",{key:b.id,value:b.id},h(b.name),9,Ne))),128))],512),[[fe,z.value]])])),e("button",{type:"button",onClick:R,class:"mt-2 text-sm text-blue-400 hover:text-blue-300"},h(M.value?"Choose existing category":"+ Create new category"),1),g(N,{class:"mt-2",message:w.value.category_id},null,8,["message"]),g(N,{class:"mt-2",message:w.value.new_category},null,8,["message"])]),g(N,{class:"mb-3",message:w.value.feed_url},null,8,["message"]),e("button",{type:"submit",class:_(["w-full inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-3 text-sm font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-blue-500 focus:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-neutral-900 active:bg-blue-700",{"opacity-25":$.value}]),disabled:$.value},[$.value?(l(),n("svg",De,[...s[11]||(s[11]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):m("",!0),T(" "+h($.value?"Subscribing...":"Subscribe"),1)],10,qe)],32)])):(l(),n("div",Se,[e("form",{onSubmit:G(a,["prevent"])},[e("div",null,[g(Y,{ref_key:"urlInput",ref:S,id:"add-feed-url",type:"url",class:"block w-full text-base",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=b=>u.value=b),placeholder:"https://example.com or feed URL",required:""},null,8,["modelValue"]),s[7]||(s[7]=e("p",{class:"mt-1.5 text-xs text-neutral-600 dark:text-neutral-500"}," Enter a website URL or direct RSS/Atom feed URL ",-1)),g(N,{class:"mt-2",message:i.value},null,8,["message"])]),e("button",{type:"submit",class:_(["mt-4 w-full inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-3 text-sm font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-blue-500 focus:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-neutral-900 active:bg-blue-700",{"opacity-25":d.value}]),disabled:d.value},[d.value?(l(),n("svg",Fe,[...s[8]||(s[8]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):m("",!0),T(" "+h(d.value?"Searching...":"Find Feed"),1)],10,je)],32)]))])])):m("",!0)]),_:1})])):m("",!0)]),_:1})]))}},Ke={class:"fixed bottom-20 lg:bottom-6 inset-x-0 z-50 flex flex-col items-center gap-2 pointer-events-none px-4"},Qe={key:0,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},Pe={key:1,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},Je={key:2,class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},Ge=["onClick"],We={__name:"ToastContainer",setup(o){const{toasts:x,dismiss:c}=he();return(p,u)=>(l(),n("div",Ke,[(l(!0),n(O,null,E(A(x),i=>(l(),n("div",{key:i.id,class:_(["pointer-events-auto flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium shadow-lg transition-all duration-300",[i.type==="success"?"bg-green-600 text-white":i.type==="error"?"bg-red-600 text-white":"bg-neutral-300 dark:bg-neutral-700 text-neutral-900 dark:text-neutral-100",i.leaving?"opacity-0 translate-y-2":"opacity-100 translate-y-0"]]),role:"status","aria-live":"polite"},[i.type==="success"?(l(),n("svg",Qe,[...u[0]||(u[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1)])])):i.type==="error"?(l(),n("svg",Pe,[...u[1]||(u[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"},null,-1)])])):(l(),n("svg",Je,[...u[2]||(u[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},null,-1)])])),e("span",null,h(i.message),1),e("button",{onClick:d=>A(c)(i.id),class:"ml-1 shrink-0 rounded p-0.5 opacity-70 hover:opacity-100 transition-opacity","aria-label":"Dismiss"},[...u[3]||(u[3]=[e("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ge)],2))),128))]))}},Xe={key:0,class:"fixed inset-y-0 left-0 z-50 flex w-72 flex-col bg-neutral-50 dark:bg-neutral-900 shadow-xl",role:"dialog","aria-label":"Navigation sidebar"},Ze={class:"flex min-h-14 items-center justify-between border-b border-neutral-200 dark:border-neutral-800 px-4 pt-safe"},et={class:"flex items-center gap-1"},tt={class:"flex-1 overflow-y-auto py-2","aria-label":"Feed navigation"},rt={class:"px-3 pb-2"},lt={key:0,class:"text-xs text-neutral-600 dark:text-neutral-500"},nt={key:0,class:"text-xs text-neutral-600 dark:text-neutral-500"},ot={class:"px-3 pt-3"},at={key:0,class:"inline-flex items-center rounded-full bg-blue-600 px-2 py-0.5 text-xs font-medium text-white"},st=["onClick","aria-expanded","title","aria-label"],it=["onClick"],ut={class:"flex-1 truncate"},dt={key:0,class:"text-xs text-neutral-600 dark:text-neutral-500"},ct={key:0,class:"ml-4"},vt=["onClick"],ft=["src"],xt={key:1,class:"h-4 w-4 shrink-0 rounded-sm bg-neutral-300 dark:bg-neutral-700"},pt={class:"flex-1 truncate text-left"},kt={key:2,class:"h-3.5 w-3.5 shrink-0 text-amber-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-label":"Feed disabled"},bt={key:3,class:"text-xs text-neutral-600 dark:text-neutral-500"},gt={key:0,class:"mt-0.5"},mt=["onClick"],ht=["src"],yt={key:1,class:"h-4 w-4 shrink-0 rounded-sm bg-neutral-300 dark:bg-neutral-700"},wt={class:"flex-1 truncate text-left"},Ct={key:2,class:"h-3.5 w-3.5 shrink-0 text-amber-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-label":"Feed disabled"},_t={key:3,class:"text-xs text-neutral-600 dark:text-neutral-500"},$t={class:"border-t border-neutral-200 dark:border-neutral-800 p-3 space-y-2"},Mt={__name:"SidebarDrawer",props:{open:Boolean,persistent:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},sidebar:Object,activeFeedId:Number,activeCategoryId:Number,activeFilter:String},emits:["close","collapse-toggle","navigate"],setup(o,{emit:x}){const{openAddFeedModal:c}=ee(),p=oe(),u=ne(),i=o,d=x,f=C({});function V(v){f.value[v]=!f.value[v]}function F(v){return f.value[v]??!1}function y(v){i.persistent||d("close"),d("navigate",v)}function z(){return!i.activeFeedId&&!i.activeCategoryId&&!i.activeFilter}function j(){d("close"),c()}function M(){d("close"),u.push({name:"feeds.manage"})}function $(){d("close"),u.push({name:"settings"})}function w(v){return p.loaded&&p.unreadByFeed[v]||0}function S(v){return p.loaded?v.feeds.reduce((r,t)=>r+(p.unreadByFeed[t.id]||0),0):v.unread_count||0}return(v,r)=>o.persistent?m("",!0):(l(),n(O,{key:0},[g(D,{name:"overlay"},{default:I(()=>[o.open?(l(),n("div",{key:0,class:"fixed inset-0 z-40 bg-black/60",onClick:r[0]||(r[0]=t=>d("close"))})):m("",!0)]),_:1}),g(D,{name:"drawer"},{default:I(()=>[o.open?(l(),n("div",Xe,[e("div",Ze,[r[10]||(r[10]=e("h2",{class:"text-lg font-semibold text-neutral-900 dark:text-neutral-100"}," RReader ",-1)),e("div",et,[e("button",{onClick:r[1]||(r[1]=t=>M()),class:"rounded-lg px-2.5 py-1.5 text-xs font-medium text-blue-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-blue-300 transition-colors cursor-pointer"}," Edit "),e("button",{onClick:r[2]||(r[2]=t=>d("close")),class:"rounded-lg p-1.5 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors",title:"Close sidebar","aria-label":"Close sidebar"},[...r[9]||(r[9]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("nav",tt,[e("div",rt,[e("button",{onClick:r[3]||(r[3]=t=>y({filter:"today"})),class:_(["flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-colors cursor-pointer",o.activeFilter==="today"?"bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200/50 dark:hover:bg-neutral-800/50"])},[r[11]||(r[11]=e("svg",{class:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})],-1)),r[12]||(r[12]=e("span",{class:"flex-1 text-left"},"Today",-1)),o.sidebar.todayCount>0?(l(),n("span",lt,h(o.sidebar.todayCount),1)):m("",!0)],2),e("button",{onClick:r[4]||(r[4]=t=>y({filter:"read_later"})),class:_(["flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-colors cursor-pointer",o.activeFilter==="read_later"?"bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200/50 dark:hover:bg-neutral-800/50"])},[r[13]||(r[13]=e("svg",{class:"h-5 w-5 text-amber-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1)),r[14]||(r[14]=e("span",{class:"flex-1 text-left"},"Read Later",-1)),o.sidebar.readLaterCount>0?(l(),n("span",nt,h(o.sidebar.readLaterCount),1)):m("",!0)],2),e("button",{onClick:r[5]||(r[5]=t=>y({filter:"recently_read"})),class:_(["flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-colors cursor-pointer",o.activeFilter==="recently_read"?"bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200/50 dark:hover:bg-neutral-800/50"])},[...r[15]||(r[15]=[e("svg",{class:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("span",{class:"flex-1 text-left"},"Recently Read",-1)])],2)]),r[22]||(r[22]=e("div",{class:"mx-3 border-t border-neutral-200 dark:border-neutral-800"},null,-1)),e("div",ot,[r[21]||(r[21]=e("div",{class:"flex items-center justify-between px-3 pb-2"},[e("h3",{class:"text-xs font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-500"}," Feeds ")],-1)),e("button",{onClick:r[6]||(r[6]=t=>y({})),class:_(["flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-colors cursor-pointer",z()?"bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200/50 dark:hover:bg-neutral-800/50"])},[r[16]||(r[16]=e("svg",{class:"h-5 w-5 text-neutral-500 dark:text-neutral-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})],-1)),r[17]||(r[17]=e("span",{class:"flex-1 text-left"},"All",-1)),o.sidebar.totalUnread>0?(l(),n("span",at,h(o.sidebar.totalUnread),1)):m("",!0)],2),(l(!0),n(O,null,E(o.sidebar.categories,t=>(l(),n("div",{key:t.id,class:"mt-0.5"},[e("div",{class:_(["flex w-full items-center gap-0.5 rounded-lg text-sm transition-colors",o.activeCategoryId===t.id?"bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200/50 dark:hover:bg-neutral-800/50"])},[e("button",{onClick:a=>V(t.id),class:"shrink-0 rounded-lg p-2.5 text-neutral-600 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors cursor-pointer","aria-expanded":F(t.id),title:`Toggle ${t.name} feeds`,"aria-label":`Toggle ${t.name} feeds`},[(l(),n("svg",{class:_(["h-4 w-4 transition-transform duration-200",{"rotate-90":F(t.id)}]),fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[...r[18]||(r[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"},null,-1)])],2))],8,st),e("button",{onClick:a=>y({category_id:t.id}),class:"flex min-w-0 flex-1 items-center gap-2 py-2.5 pr-3 text-left cursor-pointer"},[e("span",ut,h(t.name),1),S(t)>0?(l(),n("span",dt,h(S(t)),1)):m("",!0)],8,it)],2),F(t.id)?(l(),n("div",ct,[(l(!0),n(O,null,E(t.feeds,a=>(l(),n("button",{key:a.id,onClick:R=>y({feed_id:a.id}),class:_(["flex w-full items-center gap-2.5 rounded-lg px-3 py-2 text-sm transition-colors cursor-pointer",o.activeFeedId===a.id?"bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100":"text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200/50 dark:hover:bg-neutral-800/50 hover:text-neutral-700 dark:hover:text-neutral-300"])},[a.favicon_url?(l(),n("img",{key:0,src:a.favicon_url,class:"h-4 w-4 shrink-0 rounded-sm",alt:""},null,8,ft)):(l(),n("div",xt)),e("span",pt,h(a.title),1),a.disabled_at?(l(),n("svg",kt,[...r[19]||(r[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"},null,-1)])])):w(a.id)>0?(l(),n("span",bt,h(w(a.id)),1)):m("",!0)],10,vt))),128))])):m("",!0)]))),128)),o.sidebar.uncategorizedFeeds.length>0?(l(),n("div",gt,[(l(!0),n(O,null,E(o.sidebar.uncategorizedFeeds,t=>(l(),n("button",{key:t.id,onClick:a=>y({feed_id:t.id}),class:_(["flex w-full items-center gap-2.5 rounded-lg px-3 py-2.5 text-sm transition-colors cursor-pointer",o.activeFeedId===t.id?"bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200/50 dark:hover:bg-neutral-800/50"])},[t.favicon_url?(l(),n("img",{key:0,src:t.favicon_url,class:"h-4 w-4 shrink-0 rounded-sm",alt:""},null,8,ht)):(l(),n("div",yt)),e("span",wt,h(t.title),1),t.disabled_at?(l(),n("svg",Ct,[...r[20]||(r[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"},null,-1)])])):w(t.id)>0?(l(),n("span",_t,h(w(t.id)),1)):m("",!0)],10,mt))),128))])):m("",!0)])]),e("div",$t,[e("button",{onClick:r[7]||(r[7]=t=>j()),class:"flex w-full items-center justify-center gap-2 rounded-lg bg-blue-600 px-4 py-2.5 text-sm font-medium text-white hover:bg-blue-700 transition-colors cursor-pointer"},[...r[23]||(r[23]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),T(" Add Feed ",-1)])]),e("button",{onClick:r[8]||(r[8]=t=>$()),class:"flex w-full items-center justify-center gap-2 rounded-lg bg-neutral-200 dark:bg-neutral-800 px-4 py-2.5 text-sm font-medium text-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-700 transition-colors cursor-pointer"},[...r[24]||(r[24]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.241-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.992l-1.004-.827a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.28z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),T(" Settings ",-1)])])])])):m("",!0)]),_:1})],64))}},St=ae(Mt,[["__scopeId","data-v-eedec5df"]]),jt={class:"min-h-screen bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100"},Ft={key:0,class:"flex items-center justify-center gap-2 bg-amber-600 px-4 py-1.5 text-xs font-medium text-white"},zt={class:"pb-16 lg:pb-0"},At={class:"flex h-14 items-center justify-around px-2"},Q=10,Bt={__name:"AppLayout",setup(o){const{isOnline:x}=Z();Ce();const c=oe(),p=P(),u=de(),i=ne(),d=pe(),{isAddFeedModalOpen:f,openAddFeedModal:V,closeAddFeedModal:F}=ee();function y(){u.toggleSidebar()}ke("toggleSidebar",y);const z=U(()=>({totalUnread:c.loaded?c.unreadCount:p.totalUnread,readLaterCount:c.loaded?c.readLaterCount:p.readLaterCount,todayCount:p.todayCount,categories:p.categories,uncategorizedFeeds:p.uncategorizedFeeds})),j=U(()=>{const t=d.query.feed_id;return t?Number(t):null}),M=U(()=>{const t=d.query.category_id;return t?Number(t):null}),$=U(()=>d.query.filter||null);function w(t){u.closeSidebar(),t.filter?i.push({name:"articles.index",query:{filter:t.filter}}):t.feed_id?i.push({name:"articles.index",query:{feed_id:t.feed_id}}):t.category_id?i.push({name:"articles.index",query:{category_id:t.category_id}}):i.push({name:"articles.index"})}const S=C(!1);let v=0;function r(){const t=window.scrollY;t<Q?S.value=!1:t>v+Q?S.value=!0:t<v-Q&&(S.value=!1),v=t}return re(()=>{window.addEventListener("scroll",r,{passive:!0})}),le(()=>{window.removeEventListener("scroll",r)}),(t,a)=>{const R=be("router-view");return l(),n("div",jt,[A(x)?m("",!0):(l(),n("div",Ft,[...a[5]||(a[5]=[e("svg",{class:"h-4 w-4 shrink-0",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})],-1),T(" You're offline â€” viewing cached content ",-1)])])),e("main",zt,[g(R,null,{default:I(({Component:B})=>[(l(),q(ge,{include:"ArticleListView"},[(l(),q(me(B)))],1024))]),_:1})]),g(We),g(Ye,{show:A(f),onClose:A(F)},null,8,["show","onClose"]),g(St,{open:A(u).sidebarOpen,sidebar:z.value,"active-feed-id":j.value,"active-category-id":M.value,"active-filter":$.value,onClose:a[0]||(a[0]=B=>A(u).closeSidebar()),onNavigate:w},null,8,["open","sidebar","active-feed-id","active-category-id","active-filter"]),e("nav",{class:_(["fixed bottom-0 inset-x-0 z-40 border-t border-neutral-200 dark:border-neutral-800 bg-white/95 dark:bg-neutral-900/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 dark:supports-[backdrop-filter]:bg-neutral-900/80 lg:hidden pb-safe transition-transform duration-300",S.value?"translate-y-full":"translate-y-0"]),"aria-label":"Bottom navigation"},[e("div",At,[e("button",{onClick:a[1]||(a[1]=B=>y()),class:"flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200 transition-colors",title:"Open sidebar","aria-label":"Open sidebar"},[...a[6]||(a[6]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})],-1),e("span",{class:"text-[10px]"},"Menu",-1)])]),e("button",{onClick:a[2]||(a[2]=B=>w({filter:"read_later"})),class:_(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",$.value==="read_later"?"text-amber-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"Read Later","aria-label":"Read Later"},[...a[7]||(a[7]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})],-1),e("span",{class:"text-[10px]"},"Read Later",-1)])],2),e("button",{onClick:a[3]||(a[3]=B=>w({})),class:_(["flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors",!$.value&&!j.value&&!M.value&&A(d).name==="articles.index"?"text-blue-500":"text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200"]),title:"All feeds","aria-label":"All feeds"},[...a[8]||(a[8]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})],-1),e("span",{class:"text-[10px]"},"Feeds",-1)])],2),e("button",{onClick:a[4]||(a[4]=B=>A(V)()),class:"flex flex-col items-center justify-center gap-0.5 rounded-lg px-3 py-1.5 transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-800 dark:hover:text-neutral-200",title:"Add feed","aria-label":"Add feed"},[...a[9]||(a[9]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3"})],-1),e("span",{class:"text-[10px]"},"Add",-1)])])])],2)])}}},Lt=ae(Bt,[["__scopeId","data-v-393aa50b"]]),Nt={__name:"AppShell",props:{initialSidebar:{type:Object,default:()=>({})},user:{type:Object,required:!0}},setup(o){const x=o,c=P();return c.loaded||c.initialize(x.initialSidebar),(p,u)=>(l(),q(Lt))}};export{Nt as default};
