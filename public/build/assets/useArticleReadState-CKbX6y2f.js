import{B as u}from"./app-BVMziMt6.js";function d(s){window.__swReady?.then(t=>{t&&t.postMessage(s)})}function f(s){return new Promise(t=>{if(!window.__swReady){t(null);return}window.__swReady.then(n=>{if(!n){t(null);return}let e=!1;const a=new MessageChannel;a.port1.onmessage=i=>{e||(e=!0,a.port1.close(),t(i.data))},n.postMessage(s,[a.port2]),setTimeout(()=>{e||(e=!0,a.port1.close(),t(null))},500)})})}function l(){function s(e){d({type:"save-reading-state",state:e})}function t(){d({type:"clear-reading-state"})}async function n(){return f({type:"get-reading-state"})}return{saveReadingState:s,clearReadingState:t,loadReadingState:n}}const r=u(new Map);function p(){function s(n,e){r.has(n)||r.set(n,e)}function t(n){if(r.size===0)return{};const e={};for(let a=0;a<n.length;a++){const i=n[a];if(!i.is_read&&r.has(i.id)){n[a]={...i,is_read:!0};const o=i.feed?.id||r.get(i.id);o&&(e[o]=(e[o]||0)-1)}}return e}return{markRead:s,applyReadStates:t}}export{p as a,l as u};
