import{j as s,m as u,i,h as c,x as f}from"./app-CLDzTedc.js";function h(){if(typeof localStorage>"u")return"dark";const e=localStorage.getItem("rreader-theme");if(e&&["dark","light","system"].includes(e))return e;const t=localStorage.getItem("rreader-dark-mode");if(t!==null){const a=t==="true"?"dark":"light";return localStorage.setItem("rreader-theme",a),localStorage.removeItem("rreader-dark-mode"),a}return"dark"}const r=c(h());function l(){return r.value==="system"?typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches:r.value==="dark"}function n(){typeof document>"u"||(l()?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))}n();const d=f(()=>l());function k(){let e=null,t=null;function a(){r.value=d.value?"light":"dark"}function m(o){r.value=o}return s(()=>{n(),e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{r.value==="system"&&n()},e.addEventListener("change",t)}),u(()=>{e&&t&&e.removeEventListener("change",t)}),i(r,o=>{localStorage.setItem("rreader-theme",o),n()}),{isDark:d,theme:r,toggle:a,setTheme:m}}export{k as u};
