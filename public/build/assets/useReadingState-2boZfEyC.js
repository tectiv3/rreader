function i(n){window.__swReady?.then(e=>{e&&e.postMessage(n)})}function r(n){return new Promise(e=>{if(!window.__swReady){e(null);return}window.__swReady.then(a=>{if(!a){e(null);return}let t=!1;const s=new MessageChannel;s.port1.onmessage=o=>{t||(t=!0,s.port1.close(),e(o.data))},a.postMessage(n,[s.port2]),setTimeout(()=>{t||(t=!0,s.port1.close(),e(null))},500)})})}function u(){function n(t){i({type:"save-reading-state",state:t})}function e(){i({type:"clear-reading-state"})}async function a(){return r({type:"get-reading-state"})}return{saveReadingState:n,clearReadingState:e,loadReadingState:a}}export{u};
